//---------------------------
// ANNOTATION.ts
//---------------------------
import { __decorate, __metadata } from "tslib";
import { Component, Input } from '@angular/core';
var AnnotationComponent = /** @class */ (function () {
    function AnnotationComponent() {
    }
    AnnotationComponent.prototype.onClick = function (payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    };
    AnnotationComponent.prototype.onContainerClick = function (target, payload) {
        if (!this.emit || this.isIconClass(target.className))
            return;
        this.emit('click', payload);
    };
    /** Test if a string is a n7-icon class */
    AnnotationComponent.prototype.isIconClass = function (classString) {
        return /n7-icon.*/.test(classString);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], AnnotationComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], AnnotationComponent.prototype, "emit", void 0);
    AnnotationComponent = __decorate([
        Component({
            selector: 'n7-annotation',
            template: "<div *ngIf=\"data\"\r\n     class=\"n7-annotation__container {{ data.classes || ''}}\"\r\n     (click)=\"data.payload && onContainerClick($event.target, data.payload)\">\r\n    <ng-container *ngIf=\"!data.isCollapsed\">\r\n        <!-- view the full annotation -->\r\n        <ng-container *ngTemplateOutlet=\"expanded\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.isCollapsed\">\r\n        <!-- minimal view of the annotation -->\r\n        <ng-container *ngTemplateOutlet=\"collapsed\"></ng-container>\r\n    </ng-container>\r\n</div>\r\n\r\n<ng-template #expanded>\r\n    <!-- metadata row -->\r\n    <div class=\"n7-annotation__metadata-row\">\r\n        <!-- avatar -->\r\n        <div class=\"n7-annotation__image-wrapper\">\r\n            <img [src]=\"data.user.image\"\r\n                 alt=\"User profile picture\"\r\n                 class=\"n7-annotation__image\">\r\n        </div>\r\n        <!-- name -->\r\n        <div class=\"n7-annotation__info-cont\">\r\n            <n7-anchor-wrapper [data]=\"data.user.anchor\">\r\n                <div class=\"n7-annotation__user-name\">{{data.user.name}}</div>\r\n            </n7-anchor-wrapper>\r\n            <!-- time ago - parent notebook -->\r\n            <div class=\"n7-annotation__info\">\r\n                <span class=\"n7-annotation__date\">{{data.date}}</span>\r\n                <span *ngIf=\"data.notebook?.anchor?.href\"> in\r\n                    <!-- rendering error appeared with n7-anchor-wrapper -->\r\n                    <a [href]=\"data.notebook.anchor.href\"\r\n                       [target]=\"data.notebook.anchor.target || '_self'\">\r\n                        <span>{{data.notebook.name}}</span>\r\n                    </a>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class=\"n7-annotation__info\">\r\n            <!-- arrow icon -->\r\n            <span *ngIf=\"data.icon\"\r\n                  [ngClass]=\"data.icon['id']\"\r\n                  (click)=\"data.icon['payload'] && onClick(data.icon['payload'])\">\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"n7-annotation__divider\">\r\n\r\n    <!-- highlight -->\r\n    <div class=\"n7-annotation__body-row\"\r\n         *ngIf=\"data.body\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n    </div>\r\n\r\n    <!-- comment -->\r\n    <div class=\"n7-annotation__comment-row\"\r\n         *ngIf=\"data.comment\">\r\n        <span class=\"n7-annotation__comment\">\r\n            {{data.comment}}\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #collapsed>\r\n    <div class=\"n7-annotation__collapsed\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n        <span>\r\n            <n7-anchor-wrapper [data]=\"data.notebook.anchor\"\r\n                               class=\"n7-annotation__notebook\">\r\n                {{data.notebook.name}}\r\n            </n7-anchor-wrapper>\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n"
        })
    ], AnnotationComponent);
    return AnnotationComponent;
}());
export { AnnotationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ub3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuNy1mcm9udGVuZC9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QixnQkFBZ0I7QUFDaEIsNkJBQTZCOztBQUU3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTBEakQ7SUFBQTtJQXFCQSxDQUFDO0lBaEJDLHFDQUFPLEdBQVAsVUFBUSxPQUFPO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTztRQUV2QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsOENBQWdCLEdBQWhCLFVBQWlCLE1BQW1CLEVBQUUsT0FBTztRQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7WUFBRSxPQUFPO1FBRTdELElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCwwQ0FBMEM7SUFDMUMseUNBQVcsR0FBWCxVQUFZLFdBQW1CO1FBQzdCLE9BQU8sV0FBVyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBbkJRO1FBQVIsS0FBSyxFQUFFOztxREFBc0I7SUFFckI7UUFBUixLQUFLLEVBQUU7O3FEQUFXO0lBSFIsbUJBQW1CO1FBSi9CLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxlQUFlO1lBQ3pCLDJpR0FBZ0M7U0FDakMsQ0FBQztPQUNXLG1CQUFtQixDQXFCL0I7SUFBRCwwQkFBQztDQUFBLEFBckJELElBcUJDO1NBckJZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbIi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIEFOTk9UQVRJT04udHNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQW5jaG9yLCBJY29uIH0gZnJvbSAnLi4vLi4vc2hhcmVkLWludGVyZmFjZXMnO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3IgQW5ub3RhdGlvbkNvbXBvbmVudCdzIFwiZGF0YVwiXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB1c2VyIChyZXF1aXJlZClcclxuICogIC0gaW1hZ2UgKG9wdGlvbmFsKVxyXG4gKiAgLSBuYW1lIChyZXF1aXJlZClcclxuICogIC0gYW5jaG9yIChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGRhdGUgKHJlcXVpcmVkKVxyXG4gKiBAcHJvcGVydHkgbm90ZWJvb2sgKHJlcXVpcmVkKVxyXG4gKiAgLSBuYW1lIChyZXF1aXJlZClcclxuICogIC0gYW5jaG9yIChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGljb24gKG9wdGlvbmFsKVxyXG4gKiBAcHJvcGVydHkgYm9keSAocmVxdWlyZWQpXHJcbiAqIEBwcm9wZXJ0eSBjb21tZW50IChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGNsYXNzZXMgKG9wdGlvbmFsKVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBbm5vdGF0aW9uRGF0YSB7XHJcbiAgLyoqIFVzZXIgZGF0YSAqL1xyXG4gIHVzZXI6IHtcclxuICAgIC8qKiBQcm9maWxlIHBpY3R1cmUgKi9cclxuICAgIGltYWdlOiBzdHJpbmc7XHJcbiAgICAvKiogVXNlciBmdWxsIG5hbWUgKi9cclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIC8qKiBOYXZpZ2F0ZSB0byB1c2VyIHBhZ2UgKi9cclxuICAgIGFuY2hvcj86IEFuY2hvcjtcclxuICB9O1xyXG4gIC8qKiBEYXRlIHN0cmluZyAqL1xyXG4gIGRhdGU6IHN0cmluZztcclxuICAvKiogUGFyZW50IG5vdGVib29rIGRhdGEgKi9cclxuICBub3RlYm9vazoge1xyXG4gICAgLyoqIE5vdGVib29rIHRpdGxlICovXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAvKiogTm90ZWJvb2sgbmF2aWdhdGlvbiAqL1xyXG4gICAgYW5jaG9yOiBBbmNob3I7XHJcbiAgfTtcclxuICAvKiogVmlldyB0aGUgYW5ub3RhdGlvbiBpbiBhIG1pbmltYWwgZm9ybSAqL1xyXG4gIGlzQ29sbGFwc2VkOiBib29sZWFuO1xyXG4gIC8qKiBJY29uIGluIHRoZSB0b3AtcmlnaHQgY29ybmVyIG9mIHRoZSBhbm5vdGF0aW9uICovXHJcbiAgaWNvbj86IEljb247XHJcbiAgLyoqIEFubm90YXRlZCB0ZXh0ICovXHJcbiAgYm9keTogc3RyaW5nO1xyXG4gIC8qKiBBbm5vdGF0aW9uIGNvbW1lbnQgKi9cclxuICBjb21tZW50Pzogc3RyaW5nO1xyXG4gIC8qKiBIVE1MIENsYXNzZXMgKi9cclxuICBjbGFzc2VzPzogc3RyaW5nO1xyXG4gIC8qKiBlbGVtZW50IGNsaWNrIHBheWxvYWQgKi9cclxuICBwYXlsb2FkPzogYW55O1xyXG4gIC8qKiBhZGRpdGlvbmFsIGRhdGEgdXNlZnVsIGZvciB0aGUgY29tcG9uZW50J3MgbG9naWMgKi9cclxuICBfbWV0YT86IGFueTtcclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICduNy1hbm5vdGF0aW9uJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYW5ub3RhdGlvbi5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvbkNvbXBvbmVudCB7XHJcbiAgQElucHV0KCkgZGF0YTogQW5ub3RhdGlvbkRhdGE7XHJcblxyXG4gIEBJbnB1dCgpIGVtaXQ6IGFueTtcclxuXHJcbiAgb25DbGljayhwYXlsb2FkKSB7XHJcbiAgICBpZiAoIXRoaXMuZW1pdCkgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMuZW1pdCgnY2xpY2snLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIG9uQ29udGFpbmVyQ2xpY2sodGFyZ2V0OiBIVE1MRWxlbWVudCwgcGF5bG9hZCkge1xyXG4gICAgaWYgKCF0aGlzLmVtaXQgfHwgdGhpcy5pc0ljb25DbGFzcyh0YXJnZXQuY2xhc3NOYW1lKSkgcmV0dXJuO1xyXG5cclxuICAgIHRoaXMuZW1pdCgnY2xpY2snLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIC8qKiBUZXN0IGlmIGEgc3RyaW5nIGlzIGEgbjctaWNvbiBjbGFzcyAqL1xyXG4gIGlzSWNvbkNsYXNzKGNsYXNzU3RyaW5nOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiAvbjctaWNvbi4qLy50ZXN0KGNsYXNzU3RyaW5nKTtcclxuICB9XHJcbn1cclxuIl19