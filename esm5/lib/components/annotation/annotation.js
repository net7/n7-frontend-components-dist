//---------------------------
// ANNOTATION.ts
//---------------------------
import { __decorate, __metadata } from "tslib";
import { Component, Input } from '@angular/core';
var AnnotationComponent = /** @class */ (function () {
    function AnnotationComponent() {
    }
    AnnotationComponent.prototype.onClick = function (ev, payload) {
        if (!this.emit)
            return;
        ev.stopImmediatePropagation();
        this.emit('click', payload);
    };
    AnnotationComponent.prototype.onChange = function (ev, payload) {
        if (!this.emit)
            return;
        ev.stopPropagation();
        this.emit('change', payload);
    };
    AnnotationComponent.prototype.onContainerClick = function (payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    };
    AnnotationComponent.prototype.onEnter = function (payload) {
        if (!this.emit)
            return;
        this.emit('mouseenter', payload);
    };
    AnnotationComponent.prototype.onLeave = function (payload) {
        if (!this.emit)
            return;
        this.emit('mouseleave', payload);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], AnnotationComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], AnnotationComponent.prototype, "emit", void 0);
    AnnotationComponent = __decorate([
        Component({
            selector: 'n7-annotation',
            template: "<div *ngIf=\"data\"\r\n     class=\"n7-annotation__container {{ data.classes || ''}}\"\r\n     (click)=\"data.payload && onContainerClick(data.payload)\"\r\n     (mouseenter)=\"data.payload && onEnter(data.payload)\"\r\n     (mouseleave)=\"data.payload && onLeave(data.payload)\">\r\n    <ng-container *ngIf=\"!data.isCollapsed\">\r\n        <!-- view the full annotation -->\r\n        <ng-container *ngTemplateOutlet=\"expanded\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.isCollapsed\">\r\n        <!-- minimal view of the annotation -->\r\n        <ng-container *ngTemplateOutlet=\"collapsed\"></ng-container>\r\n    </ng-container>\r\n</div>\r\n\r\n<ng-template #expanded>\r\n    <!-- metadata row -->\r\n    <div class=\"n7-annotation__metadata-row\">\r\n        <!-- avatar -->\r\n        <div class=\"n7-annotation__image-wrapper\">\r\n            <img [src]=\"data.user.image\"\r\n                 alt=\"User profile picture\"\r\n                 class=\"n7-annotation__image\">\r\n        </div>\r\n        <!-- name -->\r\n        <div class=\"n7-annotation__info-cont\">\r\n            <n7-anchor-wrapper [data]=\"data.user.anchor\">\r\n                <div class=\"n7-annotation__user-name\">{{data.user.name}}</div>\r\n            </n7-anchor-wrapper>\r\n            <!-- time ago - parent notebook -->\r\n            <div class=\"n7-annotation__info\">\r\n                <span class=\"n7-annotation__date\">{{data.date}}</span>\r\n                <span *ngIf=\"data.notebook?.anchor?.href\"> in\r\n                    <!-- rendering error appeared with n7-anchor-wrapper -->\r\n                    <a [href]=\"data.notebook.anchor.href\"\r\n                       [target]=\"data.notebook.anchor.target || '_self'\">\r\n                        <span>{{data.notebook.name}}</span>\r\n                    </a>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"data.menu\"\r\n             class=\"n7-annotation__menu {{ data.menu.classes || '' }}\">\r\n            <!-- arrow icon -->\r\n            <span class=\"n7-annotation__menu-icon\"\r\n                  [ngClass]=\"data.menu.icon['id']\"\r\n                  (click)=\"onClick($event, data.menu.icon['payload'])\">\r\n            </span>\r\n            <div class=\"n7-annotation__menu-dropdown\">\r\n                <!-- menu actions -->\r\n                <div class=\"n7-annotation__menu-actions\" *ngIf=\"data.activeMenu === 'actions'\">\r\n                    <div *ngFor=\"let action of data.menu.actions\"\r\n                            (click)=\"onClick($event, action.payload)\"\r\n                            class=\"n7-annotation__menu-action\">\r\n                        {{ action.label }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"n7-annotation__menu-notebooks\" *ngIf=\"data.activeMenu === 'notebooks'\">\r\n                    <div class=\"n7-annotation__menu-notebooks-header\"\r\n                         (click)=\"onClick($event, data.menu.notebooks.header.payload)\">\r\n                        <!-- notebooks header label -->\r\n                        <span class=\"n7-annotation__notebooks-label\">\r\n                            {{ data.menu.notebooks.header.label }}\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"n7-annotation__select-cont\">\r\n                        <select class=\"n7-annotation__select\"\r\n                                (change)=\"onChange($event, $event.target.value)\"\r\n                                (click)=\"onClick($event, 'notebook-select')\">\r\n                            <option *ngFor=\"let notebook of data.menu.notebooks.items\"\r\n                                    value=\"{{ notebook.payload }}\">\r\n                                {{ notebook.label }}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"n7-annotation__divider\">\r\n\r\n    <!-- highlight -->\r\n    <div class=\"n7-annotation__body-row\"\r\n         *ngIf=\"data.body\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n    </div>\r\n\r\n    <!-- comment -->\r\n    <div class=\"n7-annotation__comment-row\"\r\n         *ngIf=\"data.comment\">\r\n        <span class=\"n7-annotation__comment\">\r\n            {{data.comment}}\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #collapsed>\r\n    <div class=\"n7-annotation__collapsed\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n        <span>\r\n            <n7-anchor-wrapper [data]=\"data.notebook.anchor\"\r\n                               class=\"n7-annotation__notebook\">\r\n                {{data.notebook.name}}\r\n            </n7-anchor-wrapper>\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n"
        })
    ], AnnotationComponent);
    return AnnotationComponent;
}());
export { AnnotationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ub3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuNy1mcm9udGVuZC9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QixnQkFBZ0I7QUFDaEIsNkJBQTZCOztBQUU3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTZFakQ7SUFBQTtJQStCQSxDQUFDO0lBMUJDLHFDQUFPLEdBQVAsVUFBUSxFQUFTLEVBQUUsT0FBTztRQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLEVBQUUsQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxzQ0FBUSxHQUFSLFVBQVMsRUFBUyxFQUFFLE9BQU87UUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTztRQUN2QixFQUFFLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELDhDQUFnQixHQUFoQixVQUFpQixPQUFPO1FBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELHFDQUFPLEdBQVAsVUFBUSxPQUFPO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTztRQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQscUNBQU8sR0FBUCxVQUFRLE9BQU87UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUE3QlE7UUFBUixLQUFLLEVBQUU7O3FEQUFzQjtJQUVyQjtRQUFSLEtBQUssRUFBRTs7cURBQVc7SUFIUixtQkFBbUI7UUFKL0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGVBQWU7WUFDekIscTdKQUFnQztTQUNqQyxDQUFDO09BQ1csbUJBQW1CLENBK0IvQjtJQUFELDBCQUFDO0NBQUEsQUEvQkQsSUErQkM7U0EvQlksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gQU5OT1RBVElPTi50c1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBBbmNob3IsIEljb24gfSBmcm9tICcuLi8uLi9zaGFyZWQtaW50ZXJmYWNlcyc7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBBbm5vdGF0aW9uQ29tcG9uZW50J3MgXCJkYXRhXCJcclxuICpcclxuICogQHByb3BlcnR5IHVzZXIgKHJlcXVpcmVkKVxyXG4gKiAgLSBpbWFnZSAob3B0aW9uYWwpXHJcbiAqICAtIG5hbWUgKHJlcXVpcmVkKVxyXG4gKiAgLSBhbmNob3IgKG9wdGlvbmFsKVxyXG4gKiBAcHJvcGVydHkgZGF0ZSAocmVxdWlyZWQpXHJcbiAqIEBwcm9wZXJ0eSBub3RlYm9vayAocmVxdWlyZWQpXHJcbiAqICAtIG5hbWUgKHJlcXVpcmVkKVxyXG4gKiAgLSBhbmNob3IgKG9wdGlvbmFsKVxyXG4gKiBAcHJvcGVydHkgaWNvbiAob3B0aW9uYWwpXHJcbiAqIEBwcm9wZXJ0eSBib2R5IChyZXF1aXJlZClcclxuICogQHByb3BlcnR5IGNvbW1lbnQgKG9wdGlvbmFsKVxyXG4gKiBAcHJvcGVydHkgY2xhc3NlcyAob3B0aW9uYWwpXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFubm90YXRpb25EYXRhIHtcclxuICAvKiogVXNlciBkYXRhICovXHJcbiAgdXNlcjoge1xyXG4gICAgLyoqIFByb2ZpbGUgcGljdHVyZSAqL1xyXG4gICAgaW1hZ2U6IHN0cmluZztcclxuICAgIC8qKiBVc2VyIGZ1bGwgbmFtZSAqL1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgLyoqIE5hdmlnYXRlIHRvIHVzZXIgcGFnZSAqL1xyXG4gICAgYW5jaG9yPzogQW5jaG9yO1xyXG4gIH07XHJcbiAgLyoqIERhdGUgc3RyaW5nICovXHJcbiAgZGF0ZTogc3RyaW5nO1xyXG4gIC8qKiBQYXJlbnQgbm90ZWJvb2sgZGF0YSAqL1xyXG4gIG5vdGVib29rOiB7XHJcbiAgICAvKiogTm90ZWJvb2sgdGl0bGUgKi9cclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIC8qKiBOb3RlYm9vayBuYXZpZ2F0aW9uICovXHJcbiAgICBhbmNob3I6IEFuY2hvcjtcclxuICB9O1xyXG4gIC8qKiBWaWV3IHRoZSBhbm5vdGF0aW9uIGluIGEgbWluaW1hbCBmb3JtICovXHJcbiAgaXNDb2xsYXBzZWQ6IGJvb2xlYW47XHJcbiAgLyoqIE1lbnUgaW4gdGhlIHRvcC1yaWdodCBjb3JuZXIgb2YgdGhlIGFubm90YXRpb24gKi9cclxuICBtZW51Pzoge1xyXG4gICAgaWNvbjogSWNvbjtcclxuICAgIGFjdGlvbnM6IHtcclxuICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgcGF5bG9hZDogYW55O1xyXG4gICAgfVtdO1xyXG4gICAgbm90ZWJvb2tzOiB7XHJcbiAgICAgIGhlYWRlcjoge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgcGF5bG9hZDogYW55O1xyXG4gICAgICB9O1xyXG4gICAgICBpdGVtczoge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgcGF5bG9hZDogYW55O1xyXG4gICAgICB9W107XHJcbiAgICB9O1xyXG4gICAgY2xhc3Nlcz86IHN0cmluZztcclxuICB9O1xyXG4gIC8qKiBWaXNpYmxlIG1lbnUgKi9cclxuICBhY3RpdmVNZW51PzogJ2FjdGlvbnMnIHwgJ25vdGVib29rcyc7XHJcbiAgLyoqIEFubm90YXRlZCB0ZXh0ICovXHJcbiAgYm9keTogc3RyaW5nO1xyXG4gIC8qKiBBbm5vdGF0aW9uIGNvbW1lbnQgKi9cclxuICBjb21tZW50Pzogc3RyaW5nO1xyXG4gIC8qKiBIVE1MIENsYXNzZXMgKi9cclxuICBjbGFzc2VzPzogc3RyaW5nO1xyXG4gIC8qKiBlbGVtZW50IGNsaWNrIHBheWxvYWQgKi9cclxuICBwYXlsb2FkPzogYW55O1xyXG4gIC8qKiBhZGRpdGlvbmFsIGRhdGEgdXNlZnVsIGZvciB0aGUgY29tcG9uZW50J3MgbG9naWMgKi9cclxuICBfbWV0YT86IGFueTtcclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICduNy1hbm5vdGF0aW9uJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vYW5ub3RhdGlvbi5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvbkNvbXBvbmVudCB7XHJcbiAgQElucHV0KCkgZGF0YTogQW5ub3RhdGlvbkRhdGE7XHJcblxyXG4gIEBJbnB1dCgpIGVtaXQ6IGFueTtcclxuXHJcbiAgb25DbGljayhldjogRXZlbnQsIHBheWxvYWQpIHtcclxuICAgIGlmICghdGhpcy5lbWl0KSByZXR1cm47XHJcbiAgICBldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuZW1pdCgnY2xpY2snLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlKGV2OiBFdmVudCwgcGF5bG9hZCkge1xyXG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcclxuICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIG9uQ29udGFpbmVyQ2xpY2socGF5bG9hZCkge1xyXG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcclxuICAgIHRoaXMuZW1pdCgnY2xpY2snLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIG9uRW50ZXIocGF5bG9hZCkge1xyXG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcclxuICAgIHRoaXMuZW1pdCgnbW91c2VlbnRlcicsIHBheWxvYWQpO1xyXG4gIH1cclxuXHJcbiAgb25MZWF2ZShwYXlsb2FkKSB7XHJcbiAgICBpZiAoIXRoaXMuZW1pdCkgcmV0dXJuO1xyXG4gICAgdGhpcy5lbWl0KCdtb3VzZWxlYXZlJywgcGF5bG9hZCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==