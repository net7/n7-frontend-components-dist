//---------------------------
// ANNOTATION.ts
//---------------------------
import { __decorate, __metadata } from "tslib";
import { Component, Input } from '@angular/core';
var AnnotationComponent = /** @class */ (function () {
    function AnnotationComponent() {
    }
    AnnotationComponent.prototype.onClick = function (ev, payload) {
        if (!this.emit)
            return;
        ev.stopImmediatePropagation();
        this.emit('click', payload);
    };
    AnnotationComponent.prototype.onContainerClick = function (target, payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    };
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], AnnotationComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], AnnotationComponent.prototype, "emit", void 0);
    AnnotationComponent = __decorate([
        Component({
            selector: 'n7-annotation',
            template: "<div *ngIf=\"data\"\n     class=\"n7-annotation__container {{ data.classes || ''}}\"\n     (click)=\"data.payload && onContainerClick($event.target, data.payload)\">\n    <ng-container *ngIf=\"!data.isCollapsed\">\n        <!-- view the full annotation -->\n        <ng-container *ngTemplateOutlet=\"expanded\"></ng-container>\n    </ng-container>\n    <ng-container *ngIf=\"data.isCollapsed\">\n        <!-- minimal view of the annotation -->\n        <ng-container *ngTemplateOutlet=\"collapsed\"></ng-container>\n    </ng-container>\n</div>\n\n<ng-template #expanded>\n    <!-- metadata row -->\n    <div class=\"n7-annotation__metadata-row\">\n        <!-- avatar -->\n        <div class=\"n7-annotation__image-wrapper\">\n            <img [src]=\"data.user.image\"\n                 alt=\"User profile picture\"\n                 class=\"n7-annotation__image\">\n        </div>\n        <!-- name -->\n        <div class=\"n7-annotation__info-cont\">\n            <n7-anchor-wrapper [data]=\"data.user.anchor\">\n                <div class=\"n7-annotation__user-name\">{{data.user.name}}</div>\n            </n7-anchor-wrapper>\n            <!-- time ago - parent notebook -->\n            <div class=\"n7-annotation__info\">\n                <span class=\"n7-annotation__date\">{{data.date}}</span>\n                <span *ngIf=\"data.notebook?.anchor?.href\"> in\n                    <!-- rendering error appeared with n7-anchor-wrapper -->\n                    <a [href]=\"data.notebook.anchor.href\"\n                       [target]=\"data.notebook.anchor.target || '_self'\">\n                        <span>{{data.notebook.name}}</span>\n                    </a>\n                </span>\n            </div>\n        </div>\n        <div *ngIf=\"data.menu\" class=\"n7-annotation__menu {{ data.menu.classes || '' }}\">\n            <!-- arrow icon -->\n            <span class=\"n7-annotation__menu-icon\" \n            [ngClass]=\"data.menu.icon['id']\"\n            (click)=\"onClick($event, data.menu.icon['payload'])\">\n            </span>\n            <div class=\"n7-annotation__menu-dropdown\">\n                <!-- menu actions -->\n                <div class=\"n7-annotation__menu-actions\">\n                    <ul>\n                        <li *ngFor=\"let action of data.menu.actions\"\n                        (click)=\"onClick($event, action.payload)\">\n                            {{ action.label }}\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"n7-annotation__menu-notebooks\">\n                    <div class=\"n7-annotation__menu-notebooks-header\"\n                    (click)=\"onClick($event, data.menu.notebooks.header.payload)\">\n                        <!-- notebooks header label -->\n                        <span class=\"n7-annotation__notebooks-label\">\n                            {{ data.menu.notebooks.header.label }}\n                        </span>\n                        <!-- notebooks header icon -->\n                        <span class=\"n7-annotation__notebooks-icon\"\n                        [ngClass]=\"data.menu.notebooks.header.icon['id']\">\n                        </span>\n                    </div>\n                    <div class=\"n7-annotation__menu-notebooks-items\">\n                        <ul>\n                            <li *ngFor=\"let notebook of data.menu.notebooks.items\"\n                            (click)=\"onClick($event, notebook.payload)\">\n                                {{ notebook.label }}\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <hr class=\"n7-annotation__divider\">\n\n    <!-- highlight -->\n    <div class=\"n7-annotation__body-row\"\n         *ngIf=\"data.body\">\n        <span class=\"n7-annotation__body\">\n            {{data.body}}\n        </span>\n    </div>\n\n    <!-- comment -->\n    <div class=\"n7-annotation__comment-row\"\n         *ngIf=\"data.comment\">\n        <span class=\"n7-annotation__comment\">\n            {{data.comment}}\n        </span>\n    </div>\n</ng-template>\n\n<ng-template #collapsed>\n    <div class=\"n7-annotation__collapsed\">\n        <span class=\"n7-annotation__body\">\n            {{data.body}}\n        </span>\n        <span>\n            <n7-anchor-wrapper [data]=\"data.notebook.anchor\"\n                               class=\"n7-annotation__notebook\">\n                {{data.notebook.name}}\n            </n7-anchor-wrapper>\n        </span>\n    </div>\n</ng-template>\n"
        })
    ], AnnotationComponent);
    return AnnotationComponent;
}());
export { AnnotationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ub3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuNy1mcm9udGVuZC9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QixnQkFBZ0I7QUFDaEIsNkJBQTZCOztBQUU3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTRFakQ7SUFBQTtJQWVBLENBQUM7SUFWQyxxQ0FBTyxHQUFQLFVBQVEsRUFBUyxFQUFFLE9BQU87UUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTztRQUN2QixFQUFFLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsOENBQWdCLEdBQWhCLFVBQWlCLE1BQW1CLEVBQUUsT0FBTztRQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFiUTtRQUFSLEtBQUssRUFBRTs7cURBQXNCO0lBRXJCO1FBQVIsS0FBSyxFQUFFOztxREFBVztJQUhSLG1CQUFtQjtRQUovQixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsZUFBZTtZQUN6QiwyaEpBQWdDO1NBQ2pDLENBQUM7T0FDVyxtQkFBbUIsQ0FlL0I7SUFBRCwwQkFBQztDQUFBLEFBZkQsSUFlQztTQWZZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbIi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBBTk5PVEFUSU9OLnRzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBbmNob3IsIEljb24gfSBmcm9tICcuLi8uLi9zaGFyZWQtaW50ZXJmYWNlcyc7XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBBbm5vdGF0aW9uQ29tcG9uZW50J3MgXCJkYXRhXCJcbiAqXG4gKiBAcHJvcGVydHkgdXNlciAocmVxdWlyZWQpXG4gKiAgLSBpbWFnZSAob3B0aW9uYWwpXG4gKiAgLSBuYW1lIChyZXF1aXJlZClcbiAqICAtIGFuY2hvciAob3B0aW9uYWwpXG4gKiBAcHJvcGVydHkgZGF0ZSAocmVxdWlyZWQpXG4gKiBAcHJvcGVydHkgbm90ZWJvb2sgKHJlcXVpcmVkKVxuICogIC0gbmFtZSAocmVxdWlyZWQpXG4gKiAgLSBhbmNob3IgKG9wdGlvbmFsKVxuICogQHByb3BlcnR5IGljb24gKG9wdGlvbmFsKVxuICogQHByb3BlcnR5IGJvZHkgKHJlcXVpcmVkKVxuICogQHByb3BlcnR5IGNvbW1lbnQgKG9wdGlvbmFsKVxuICogQHByb3BlcnR5IGNsYXNzZXMgKG9wdGlvbmFsKVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEFubm90YXRpb25EYXRhIHtcbiAgLyoqIFVzZXIgZGF0YSAqL1xuICB1c2VyOiB7XG4gICAgLyoqIFByb2ZpbGUgcGljdHVyZSAqL1xuICAgIGltYWdlOiBzdHJpbmc7XG4gICAgLyoqIFVzZXIgZnVsbCBuYW1lICovXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIC8qKiBOYXZpZ2F0ZSB0byB1c2VyIHBhZ2UgKi9cbiAgICBhbmNob3I/OiBBbmNob3I7XG4gIH07XG4gIC8qKiBEYXRlIHN0cmluZyAqL1xuICBkYXRlOiBzdHJpbmc7XG4gIC8qKiBQYXJlbnQgbm90ZWJvb2sgZGF0YSAqL1xuICBub3RlYm9vazoge1xuICAgIC8qKiBOb3RlYm9vayB0aXRsZSAqL1xuICAgIG5hbWU6IHN0cmluZztcbiAgICAvKiogTm90ZWJvb2sgbmF2aWdhdGlvbiAqL1xuICAgIGFuY2hvcjogQW5jaG9yO1xuICB9O1xuICAvKiogVmlldyB0aGUgYW5ub3RhdGlvbiBpbiBhIG1pbmltYWwgZm9ybSAqL1xuICBpc0NvbGxhcHNlZDogYm9vbGVhbjtcbiAgLyoqIE1lbnUgaW4gdGhlIHRvcC1yaWdodCBjb3JuZXIgb2YgdGhlIGFubm90YXRpb24gKi9cbiAgbWVudT86IHtcbiAgICBpY29uOiBJY29uO1xuICAgIGFjdGlvbnM6IHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBwYXlsb2FkOiBhbnk7XG4gICAgfVtdO1xuICAgIG5vdGVib29rczoge1xuICAgICAgaGVhZGVyOiB7XG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICAgIGljb246IEljb247XG4gICAgICAgIHBheWxvYWQ6IGFueTtcbiAgICAgIH07XG4gICAgICBpdGVtczoge1xuICAgICAgICBsYWJlbDogc3RyaW5nO1xuICAgICAgICBwYXlsb2FkOiBhbnk7XG4gICAgICB9W107XG4gICAgfTtcbiAgICBjbGFzc2VzPzogc3RyaW5nO1xuICB9O1xuICAvKiogQW5ub3RhdGVkIHRleHQgKi9cbiAgYm9keTogc3RyaW5nO1xuICAvKiogQW5ub3RhdGlvbiBjb21tZW50ICovXG4gIGNvbW1lbnQ/OiBzdHJpbmc7XG4gIC8qKiBIVE1MIENsYXNzZXMgKi9cbiAgY2xhc3Nlcz86IHN0cmluZztcbiAgLyoqIGVsZW1lbnQgY2xpY2sgcGF5bG9hZCAqL1xuICBwYXlsb2FkPzogYW55O1xuICAvKiogYWRkaXRpb25hbCBkYXRhIHVzZWZ1bCBmb3IgdGhlIGNvbXBvbmVudCdzIGxvZ2ljICovXG4gIF9tZXRhPzogYW55O1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduNy1hbm5vdGF0aW9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2Fubm90YXRpb24uaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgQW5ub3RhdGlvbkNvbXBvbmVudCB7XG4gIEBJbnB1dCgpIGRhdGE6IEFubm90YXRpb25EYXRhO1xuXG4gIEBJbnB1dCgpIGVtaXQ6IGFueTtcblxuICBvbkNsaWNrKGV2OiBFdmVudCwgcGF5bG9hZCkge1xuICAgIGlmICghdGhpcy5lbWl0KSByZXR1cm47XG4gICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5lbWl0KCdjbGljaycsIHBheWxvYWQpO1xuICB9XG5cbiAgb25Db250YWluZXJDbGljayh0YXJnZXQ6IEhUTUxFbGVtZW50LCBwYXlsb2FkKSB7XG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XG4gIH1cbn1cbiJdfQ==