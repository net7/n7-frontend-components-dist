import { __decorate, __metadata } from "tslib";
//---------------------------
// TEXT-VIEWER.ts
//---------------------------
import { Component, Input } from '@angular/core';
var TextViewerComponent = /** @class */ (function () {
    function TextViewerComponent() {
    }
    TextViewerComponent_1 = TextViewerComponent;
    TextViewerComponent.prototype.ngOnInit = function () {
        if (!TextViewerComponent_1._loaded) {
            var s = document.createElement('script');
            s.setAttribute('src', '/assets/pb-components/dist/pb-components-bundle.js');
            s.setAttribute('type', 'module');
            s.onload = this.onScriptLoaded;
            document.head.appendChild(s);
        }
    };
    TextViewerComponent.prototype.onScriptLoaded = function () {
        TextViewerComponent_1._loaded = true;
    };
    TextViewerComponent.prototype.onClick = function (payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    };
    var TextViewerComponent_1;
    TextViewerComponent._loaded = false;
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], TextViewerComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], TextViewerComponent.prototype, "emit", void 0);
    TextViewerComponent = TextViewerComponent_1 = __decorate([
        Component({
            selector: 'n7-text-viewer',
            template: "<!-- NEW -->\n<div class=\"n7-text-viewer {{data.classes || ''}}\" *ngIf=\"data && data.endpoint\">\n    <pb-page [attr.endpoint]=\"data.endpoint\">\n        <pb-document *ngFor=\"let doc of data.docs\" [path]=\"doc.xml\" [odd]=\"doc.odd\" view=\"div\" [id]=\"doc.id\">\n        </pb-document>\n\n        <app-drawer-layout force-narrow=\"force-narrow\" narrow=\"\">\n            <app-header-layout>\n                <app-header fixed=\"fixed\" data-template=\"browse:fix-links\" style=\"\n                transition-duration: 0ms;\n                transform: translate3d(0px, 0px, 0px);\n                left: 0px;\n                right: 0.399994px;\">\n                    <app-toolbar class=\"toolbar\" sticky=\"sticky\" style=\"transform: translate3d(0px, 0px, 0px)\">\n                        <paper-icon-button id=\"tocToggle\" class=\"toc-toggle\" icon=\"icons:view-list\" role=\"button\"\n                            tabindex=\"0\" aria-disabled=\"false\"></paper-icon-button>\n\n                        <pb-toggle-feature name=\"highlight\" selector=\"tei-app,pb-popover\" default=\"off\"\n                            action=\"disable\" emit=\"transcription\" subscribe=\"transcription\">\n                            <pb-i18n key=\"document.plain\">Plain Reading View</pb-i18n>\n                        </pb-toggle-feature>\n                        <pb-zoom emit=\"transcription\" direction=\"in\" icon=\"icons:zoom-in\"></pb-zoom>\n                        <pb-zoom emit=\"transcription\" direction=\"out\" icon=\"icons:zoom-out\"></pb-zoom>\n                        <pb-navigation emit=\"transcription\" keyboard=\"left\" subscribe=\"transcription\"\n                            direction=\"backward\" unit=\"page\">\n                            <paper-icon-button icon=\"icons:chevron-left\" role=\"button\" tabindex=\"0\"\n                                aria-disabled=\"false\"></paper-icon-button>\n                        </pb-navigation>\n                        <pb-navigation emit=\"transcription\" keyboard=\"right\" subscribe=\"transcription\"\n                            direction=\"forward\" unit=\"page\">\n                            <paper-icon-button icon=\"icons:chevron-right\" role=\"button\" tabindex=\"0\"\n                                aria-disabled=\"false\"></paper-icon-button>\n                        </pb-navigation>\n\n                        <pb-progress subscribe=\"transcription\" indeterminate=\"\" bottom-item=\"bottom-item\"\n                            style=\"visibility: hidden\"></pb-progress>\n                    </app-toolbar>\n                </app-header>\n                <pb-drawer toggle=\"tocToggle\" class=\"tocDrawer\" emit=\"toc\" subscribe=\"transcription\">\n                    <div class=\"drawer-content\">\n                        <h3>\n                            <pb-i18n key=\"document.contents\">Contents</pb-i18n>\n                        </h3>\n                        <pb-load *ngIf=\"data.docs\" id=\"toc\" url=\"api/document/{doc}/contents?target=transcription&amp;icons=true\"\n                            [src]=\"data.docs[0].id\" subscribe=\"toc\" emit=\"toc\" expand=\"expand\" auto=\"auto\"><pb-i18n key=\"dialogs.loading\">Loading</pb-i18n></pb-load>\n                    </div>\n                </pb-drawer>\n                <main class=\"content-body\">\n                    <pb-facsimile *ngIf=\"data.facsimile\" id=\"facsimile\" [attr.base-uri]=\"data.facsimile.uri\"\n                        subscribe=\"transcription\" default-zoom-level=\"0\"\n                        show-navigation-control=\"show-navigation-control\" show-navigator=\"show-navigator\">\n                    </pb-facsimile>\n                    <ng-container *ngFor=\"let doc of data.docs; index as $i;\">\n                        <!-- NO CHANNEL -->\n                        <pb-view *ngIf=\"!doc.channel\" id=\"view{{ $i }}\" [src]=\"doc.id\" subscribe=\"transcription\"\n                            emit=\"transcription\" [attr.wait-for]=\"data.facsimile ? '#facsimile' : null\" column-separator=\".tei-cb\"\n                            append-footnotes=\"append-footnotes\" view=\"div\"></pb-view>\n                        <!-- WITH CHANNEL -->\n                        <pb-view *ngIf=\"doc.channel\" id=\"view{{ $i }}\" [src]=\"doc.id\" emit=\"{{ doc.channel }}\"\n                        view=\"single\">\n                            <pb-param name=\"mode\" value=\"{{ doc.channel }}\"></pb-param>\n                        </pb-view>\n                    </ng-container>\n                </main>\n            </app-header-layout>\n        </app-drawer-layout>\n    </pb-page>\n</div>"
        })
    ], TextViewerComponent);
    return TextViewerComponent;
}());
export { TextViewerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC12aWV3ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbjctZnJvbnRlbmQvY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3RleHQtdmlld2VyL3RleHQtdmlld2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSw2QkFBNkI7QUFDN0IsaUJBQWlCO0FBQ2pCLDZCQUE2QjtBQUM3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQW9DekQ7SUFBQTtJQXlCQSxDQUFDOzRCQXpCWSxtQkFBbUI7SUFPOUIsc0NBQVEsR0FBUjtRQUNFLElBQUksQ0FBQyxxQkFBbUIsQ0FBQyxPQUFPLEVBQUU7WUFDaEMsSUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxvREFBb0QsQ0FBQyxDQUFDO1lBQzVFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ2pDLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUMvQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM5QjtJQUNILENBQUM7SUFFRCw0Q0FBYyxHQUFkO1FBQ0UscUJBQW1CLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztJQUNyQyxDQUFDO0lBRUQscUNBQU8sR0FBUCxVQUFRLE9BQU87UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7O0lBbkJNLDJCQUFPLEdBQUcsS0FBSyxDQUFDO0lBSmQ7UUFBUixLQUFLLEVBQUU7O3FEQUFzQjtJQUVyQjtRQUFSLEtBQUssRUFBRTs7cURBQVc7SUFIUixtQkFBbUI7UUFKL0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGdCQUFnQjtZQUMxQix1akpBQWlDO1NBQ2xDLENBQUM7T0FDVyxtQkFBbUIsQ0F5Qi9CO0lBQUQsMEJBQUM7Q0FBQSxBQXpCRCxJQXlCQztTQXpCWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVEVYVC1WSUVXRVIudHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIFRleHRWaWV3ZXJDb21wb25lbnQncyBcImRhdGFcIlxuICogQHByb3BlcnR5IGVuZHBvaW50IChyZXF1aXJlZClcbiAqIEBwcm9wZXJ0eSBkb2MgKHJlcXVpcmVkKVxuICogQHByb3BlcnR5IGZhY3NpbWlsZSAob3B0aW9uYWwpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFZpZXdlckRhdGEge1xuICAvKlxuICAgICAqIFRFSVB1YiBzZXJ2ZXIgZW5kcG9pbnRcbiAgKi9cbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgLypcbiAgICAgKiBYTUwgYW5kIE9ERCBwYXRoc1xuICAqL1xuICBkb2NzOiB7XG4gICAgeG1sOiBzdHJpbmc7XG4gICAgb2RkOiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICBjaGFubmVsPzogc3RyaW5nO1xuICB9W107XG4gIC8qXG4gICAgICogSUlJRiBzZXJ2ZXIgZW5kcG9pbnRcbiAgKi9cbiAgZmFjc2ltaWxlPzogYW55O1xuICAvKipcbiAgICogYWRkaXRpb25hbCBodG1sIGNsYXNzZXNcbiAgICovXG4gIGNsYXNzZXM/OiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ243LXRleHQtdmlld2VyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RleHQtdmlld2VyLmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBUZXh0Vmlld2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgZGF0YTogVGV4dFZpZXdlckRhdGE7XG5cbiAgQElucHV0KCkgZW1pdDogYW55O1xuXG4gIHN0YXRpYyBfbG9hZGVkID0gZmFsc2U7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKCFUZXh0Vmlld2VyQ29tcG9uZW50Ll9sb2FkZWQpIHtcbiAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHMuc2V0QXR0cmlidXRlKCdzcmMnLCAnL2Fzc2V0cy9wYi1jb21wb25lbnRzL2Rpc3QvcGItY29tcG9uZW50cy1idW5kbGUuanMnKTtcbiAgICAgIHMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ21vZHVsZScpO1xuICAgICAgcy5vbmxvYWQgPSB0aGlzLm9uU2NyaXB0TG9hZGVkO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzKTtcbiAgICB9XG4gIH1cblxuICBvblNjcmlwdExvYWRlZCgpIHtcbiAgICBUZXh0Vmlld2VyQ29tcG9uZW50Ll9sb2FkZWQgPSB0cnVlO1xuICB9XG5cbiAgb25DbGljayhwYXlsb2FkKSB7XG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XG4gIH1cbn1cbiJdfQ==