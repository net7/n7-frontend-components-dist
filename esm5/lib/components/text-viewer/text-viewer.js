import { __decorate, __metadata } from "tslib";
//---------------------------
// TEXT-VIEWER.ts
//---------------------------
import { Component, Input } from '@angular/core';
var TextViewerComponent = /** @class */ (function () {
    function TextViewerComponent() {
    }
    TextViewerComponent_1 = TextViewerComponent;
    TextViewerComponent.prototype.ngOnInit = function () {
        if (!TextViewerComponent_1._loaded) {
            var s = document.createElement('script');
            s.setAttribute('src', '/assets/pb-components/dist/pb-components-bundle.js');
            s.setAttribute('type', 'module');
            s.onload = this.onScriptLoaded;
            document.head.appendChild(s);
        }
    };
    TextViewerComponent.prototype.onScriptLoaded = function () {
        TextViewerComponent_1._loaded = true;
    };
    TextViewerComponent.prototype.onClick = function (payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    };
    var TextViewerComponent_1;
    TextViewerComponent._loaded = false;
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], TextViewerComponent.prototype, "data", void 0);
    __decorate([
        Input(),
        __metadata("design:type", Object)
    ], TextViewerComponent.prototype, "emit", void 0);
    TextViewerComponent = TextViewerComponent_1 = __decorate([
        Component({
            selector: 'n7-text-viewer',
            template: "<!-- NEW -->\n<div\n  class=\"n7-text-viewer {{data.classes || ''}}\"\n  *ngIf=\"data && data.endpoint\"\n>\n  <pb-page [attr.endpoint]=\"data.endpoint\" api-version=\"1.0.0\">\n    <!-- <pb-load url=\"api/search\"></pb-load> -->\n    <pb-document\n      *ngFor=\"let doc of data.docs\"\n      [path]=\"doc.xml\"\n      [odd]=\"doc.odd\"\n      [id]=\"doc.id\"\n    >\n    </pb-document>\n    \n    <!-- <pb-load url=\"api/mrcsearch?query=lepre&collection=murucademo\"></pb-load> -->\n\n    <app-drawer-layout force-narrow=\"force-narrow\" narrow=\"\">\n      <app-header-layout>\n        <app-header\n          fixed=\"fixed\"\n          data-template=\"browse:fix-links\"\n          style=\"\n            transition-duration: 0ms;\n            transform: translate3d(0px, 0px, 0px);\n            left: 0px;\n            right: 0.399994px;\n          \"\n        >\n          <!-- <pb-login id=\"loginElem\" auto=\"false\"></pb-login> -->\n          <app-toolbar\n            class=\"toolbar\"\n            sticky=\"sticky\"\n            style=\"transform: translate3d(0px, 0px, 0px)\"\n          >\n            <paper-icon-button\n              id=\"tocToggle\"\n              class=\"toc-toggle\"\n              icon=\"icons:view-list\"\n              role=\"button\"\n              tabindex=\"0\"\n              aria-disabled=\"false\"\n            ></paper-icon-button>\n\n            <pb-toggle-feature *ngIf=\"data.docs.length === 1\"\n              name=\"highlight1\"\n              selector=\"tei-app,pb-popover,pb-highlight\"\n              default=\"off\"\n              action=\"disable\"\n              emit=\"transcription\"\n              subscribe=\"transcription\"\n            >\n              <pb-i18n key=\"document.plain\">Plain Reading View</pb-i18n>\n            </pb-toggle-feature>\n\n            <pb-zoom\n              emit=\"transcription\"\n              direction=\"in\"\n              icon=\"icons:zoom-in\"\n            ></pb-zoom>\n            <pb-zoom\n              emit=\"transcription\"\n              direction=\"out\"\n              icon=\"icons:zoom-out\"\n            ></pb-zoom>\n            <!-- *ngIf=\"data.docs.length > 1\" -->\n            <pb-select-feature *ngIf=\"data.docs.length > 1\"\n              id=\"select-view1\"\n              name=\"view1\"\n              label=\"View\"\n              items='[\n                    {\"name\": \"View All Named Entities\", \"selectors\": [{\"selector\": \".person\", \"state\": false}, {\"selector\": \".place\", \"state\": false}]},\n      {\"name\": \"View People\", \"selectors\": [{\"selector\": \".person\", \"state\": false}, {\"selector\": \".place\", \"state\": true}]},\n      {\"name\": \"View Places\", \"selectors\": [{\"selector\": \".place\", \"state\": false}, {\"selector\": \".person\", \"state\": true}]}\n        ]'\n              subscribe=\"addChannel\"\n              emit=\"addChannel\"\n            ></pb-select-feature>\n           \n            <pb-download\n              *ngIf=\"data.docs && data.docs.length > 1\"\n              type=\"epub\"\n              [src]=\"data.docs[0].id\"\n              dialog=\"downloadDialog\"\n              title=\"Download ePub\"\n            >\n              <paper-button raised=\"\">Download ePub</paper-button>\n            </pb-download>\n\n\n            \n            <!-- <pb-search id=\"search-form\" action=\"search.search\" submitOnLoad=\"true\" data-template=\"pages:parse-params\">\n              <div class=\"buttons\">\n                  <paper-button slot=\"searchButton\"><pb-i18n key=\"search.search\"></pb-i18n></paper-button>\n                  <paper-button slot=\"resetButton\"><pb-i18n key=\"search.reset\"></pb-i18n></paper-button>\n              </div>\n            </pb-search>\n            <pb-load class=\"hidden\" url=\"api/search?query=Accompagnati&da&Alchifa&action=search\" auto=\"true\"></pb-load> -->\n            \n            \n            \n            <ng-container *ngIf=\"!data.docs[0].translation\">\n            <pb-navigation\n              emit=\"transcription\"\n              keyboard=\"left\"\n              subscribe=\"transcription\"\n              direction=\"backward\"\n              unit=\"page\"\n            >\n              <paper-icon-button\n                icon=\"icons:chevron-left\"\n                role=\"button\"\n                tabindex=\"0\"\n                aria-disabled=\"false\"\n              ></paper-icon-button>\n            </pb-navigation>\n            <pb-navigation\n              emit=\"transcription\"\n              keyboard=\"right\"\n              subscribe=\"transcription\"\n              direction=\"forward\"\n              unit=\"page\"\n            >\n              <paper-icon-button\n                icon=\"icons:chevron-right\"\n                role=\"button\"\n                tabindex=\"0\"\n                aria-disabled=\"false\"\n              ></paper-icon-button>\n            </pb-navigation>\n          </ng-container>\n\n            <pb-progress\n              subscribe=\"transcription\"\n              indeterminate=\"\"\n              bottom-item=\"bottom-item\"\n              style=\"visibility: hidden\"\n            ></pb-progress>\n          </app-toolbar>\n        </app-header>\n        <pb-drawer\n          toggle=\"tocToggle\"\n          class=\"tocDrawer\"\n          emit=\"toc\"\n          subscribe=\"transcription\"\n        >\n          <div class=\"drawer-content\">\n            <h3>\n              <pb-i18n key=\"document.contents\">Contents</pb-i18n>\n            </h3>\n            <!-- <pb-load\n              *ngIf=\"data.docs\"\n              id=\"toc\"\n              url=\"api/document/{doc}/contents?target=transcription&amp;icons=true\"\n              [src]=\"data.docs[0].id\"\n              subscribe=\"toc\"\n              emit=\"toc\"\n              expand=\"expand\"\n              auto=\"auto\"\n              ><pb-i18n key=\"dialogs.loading\">Loading</pb-i18n></pb-load\n            > -->\n          </div>\n        </pb-drawer>\n        <main class=\"content-body\">\n          <pb-facsimile\n            *ngIf=\"data.facsimile\"\n            id=\"facsimile\"\n            [attr.base-uri]=\"data.facsimile.uri\"\n            subscribe=\"transcription\"\n            default-zoom-level=\"0\"\n            show-navigation-control=\"show-navigation-control\"\n            show-navigator=\"show-navigator\"\n          >\n          </pb-facsimile>\n          <ng-container *ngFor=\"let doc of data.docs; index as $i;\">\n            <!-- NO CHANNEL -->\n            <pb-view\n              *ngIf=\"!doc.channel\"\n              id=\"view{{ $i }}\"\n              [src]=\"doc.id\"\n              subscribe=\"transcription\"\n              emit=\"transcription\"\n              [attr.wait-for]=\"data.facsimile ? '#facsimile' : null\"\n              column-separator=\".tei-cb\"\n              append-footnotes=\"append-footnotes\"\n              view=\"{{ doc.view }}\"\n            ></pb-view>\n            <!-- WITH CHANNEL / MURUCA DEMO -->\n            <pb-view\n              *ngIf=\"doc.channel && doc.translation\"\n              id=\"view{{ $i }}\"\n              [src]=\"doc.id\"\n              xpath=\"//text[@type='source']\"\n              emit=\"{{ doc.channel }}\"\n              subscribe=\"{{ doc.channel }}\"\n              view=\"{{ doc.view }}\"\n            >\n            </pb-view>\n            <pb-view\n              *ngIf=\"doc.channel && doc.translation\"\n              id=\"view{{ $i }}\"\n              [src]=\"doc.id\"\n              xpath=\"{{ doc.xpath }}\"\n              emit=\"{{ doc.channel }}\"\n              subscribe=\"{{ doc.channel }}\"\n              view=\"{{ doc.view }}\"\n            >\n              <pb-param name=\"mode\" value=\"commentary\"></pb-param>\n            </pb-view>\n            <!-- WITH CHANNEL / addChannel -->\n            <pb-view\n              *ngIf=\"doc.channel && !doc.translation\"\n              id=\"view{{ $i }}\"\n              [src]=\"doc.id\"\n              emit=\"addChannel\"\n              subscribe=\"addChannel\"\n              view=\"{{ doc.view }}\"\n            >\n              <pb-param name=\"mode\" value=\"commentary\"></pb-param>\n            </pb-view>\n          </ng-container>\n        </main>\n      </app-header-layout>\n    </app-drawer-layout>\n  </pb-page>\n</div>\n"
        })
    ], TextViewerComponent);
    return TextViewerComponent;
}());
export { TextViewerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC12aWV3ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbjctZnJvbnRlbmQvY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3RleHQtdmlld2VyL3RleHQtdmlld2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSw2QkFBNkI7QUFDN0IsaUJBQWlCO0FBQ2pCLDZCQUE2QjtBQUM3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQXNDekQ7SUFBQTtJQXlCQSxDQUFDOzRCQXpCWSxtQkFBbUI7SUFPOUIsc0NBQVEsR0FBUjtRQUNFLElBQUksQ0FBQyxxQkFBbUIsQ0FBQyxPQUFPLEVBQUU7WUFDaEMsSUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxvREFBb0QsQ0FBQyxDQUFDO1lBQzVFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ2pDLENBQUMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztZQUMvQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUM5QjtJQUNILENBQUM7SUFFRCw0Q0FBYyxHQUFkO1FBQ0UscUJBQW1CLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztJQUNyQyxDQUFDO0lBRUQscUNBQU8sR0FBUCxVQUFRLE9BQU87UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7O0lBbkJNLDJCQUFPLEdBQUcsS0FBSyxDQUFDO0lBSmQ7UUFBUixLQUFLLEVBQUU7O3FEQUFzQjtJQUVyQjtRQUFSLEtBQUssRUFBRTs7cURBQVc7SUFIUixtQkFBbUI7UUFKL0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGdCQUFnQjtZQUMxQixzclFBQWlDO1NBQ2xDLENBQUM7T0FDVyxtQkFBbUIsQ0F5Qi9CO0lBQUQsMEJBQUM7Q0FBQSxBQXpCRCxJQXlCQztTQXpCWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVEVYVC1WSUVXRVIudHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIFRleHRWaWV3ZXJDb21wb25lbnQncyBcImRhdGFcIlxuICogQHByb3BlcnR5IGVuZHBvaW50IChyZXF1aXJlZClcbiAqIEBwcm9wZXJ0eSBkb2MgKHJlcXVpcmVkKVxuICogQHByb3BlcnR5IGZhY3NpbWlsZSAob3B0aW9uYWwpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFZpZXdlckRhdGEge1xuICAvKlxuICAgICAqIFRFSVB1YiBzZXJ2ZXIgZW5kcG9pbnRcbiAgKi9cbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgLypcbiAgICAgKiBYTUwgYW5kIE9ERCBwYXRoc1xuICAqL1xuICBkb2NzOiB7XG4gICAgeG1sOiBzdHJpbmc7XG4gICAgb2RkOiBzdHJpbmc7XG4gICAgaWQ6IHN0cmluZztcbiAgICB2aWV3OiBzdHJpbmc7XG4gICAgY2hhbm5lbD86IHN0cmluZztcbiAgICB0cmFuc2xhdGlvbj86IGJvb2xlYW47XG4gIH1bXTtcbiAgLypcbiAgICAgKiBJSUlGIHNlcnZlciBlbmRwb2ludFxuICAqL1xuICBmYWNzaW1pbGU/OiBhbnk7XG4gIC8qKlxuICAgKiBhZGRpdGlvbmFsIGh0bWwgY2xhc3Nlc1xuICAgKi9cbiAgY2xhc3Nlcz86IHN0cmluZztcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbjctdGV4dC12aWV3ZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vdGV4dC12aWV3ZXIuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIFRleHRWaWV3ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBkYXRhOiBUZXh0Vmlld2VyRGF0YTtcblxuICBASW5wdXQoKSBlbWl0OiBhbnk7XG5cbiAgc3RhdGljIF9sb2FkZWQgPSBmYWxzZTtcblxuICBuZ09uSW5pdCgpIHtcbiAgICBpZiAoIVRleHRWaWV3ZXJDb21wb25lbnQuX2xvYWRlZCkge1xuICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgcy5zZXRBdHRyaWJ1dGUoJ3NyYycsICcvYXNzZXRzL3BiLWNvbXBvbmVudHMvZGlzdC9wYi1jb21wb25lbnRzLWJ1bmRsZS5qcycpO1xuICAgICAgcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnbW9kdWxlJyk7XG4gICAgICBzLm9ubG9hZCA9IHRoaXMub25TY3JpcHRMb2FkZWQ7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHMpO1xuICAgIH1cbiAgfVxuXG4gIG9uU2NyaXB0TG9hZGVkKCkge1xuICAgIFRleHRWaWV3ZXJDb21wb25lbnQuX2xvYWRlZCA9IHRydWU7XG4gIH1cblxuICBvbkNsaWNrKHBheWxvYWQpIHtcbiAgICBpZiAoIXRoaXMuZW1pdCkgcmV0dXJuO1xuICAgIHRoaXMuZW1pdCgnY2xpY2snLCBwYXlsb2FkKTtcbiAgfVxufVxuIl19