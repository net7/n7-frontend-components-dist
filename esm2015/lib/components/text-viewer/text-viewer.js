var TextViewerComponent_1;
import { __decorate, __metadata } from "tslib";
//---------------------------
// TEXT-VIEWER.ts
//---------------------------
import { Component, Input } from '@angular/core';
let TextViewerComponent = TextViewerComponent_1 = class TextViewerComponent {
    ngOnInit() {
        if (!TextViewerComponent_1._loaded) {
            const s = document.createElement('script');
            s.setAttribute('src', '/assets/pb-components/dist/pb-components-bundle.js');
            s.setAttribute('type', 'module');
            s.onload = this.onScriptLoaded;
            document.head.appendChild(s);
        }
    }
    onScriptLoaded() {
        TextViewerComponent_1._loaded = true;
    }
    onClick(payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    }
};
TextViewerComponent._loaded = false;
__decorate([
    Input(),
    __metadata("design:type", Object)
], TextViewerComponent.prototype, "data", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], TextViewerComponent.prototype, "emit", void 0);
TextViewerComponent = TextViewerComponent_1 = __decorate([
    Component({
        selector: 'n7-text-viewer',
        template: "<!-- NEW -->\r\n<div class=\"n7-text-viewer {{data.classes || ''}}\" *ngIf=\"data && data.endpoint\">\r\n<pb-page\r\n  [attr.endpoint]=\"data.endpoint\"\r\n>\r\n  <pb-document\r\n    *ngIf=\"data.doc\"\r\n    [path]=\"data.doc.xml[2]\"\r\n    [odd]=\"data.doc.odd\"\r\n    view=\"div\"\r\n    [id]=\"data.doc.id[1]\"\r\n  ></pb-document>\r\n  <pb-document\r\n    *ngIf=\"data.doc\"\r\n    [path]=\"data.doc.xml[1]\"\r\n    [odd]=\"data.doc.odd\"\r\n    view=\"page\"\r\n    [id]=\"data.doc.id[0]\"\r\n  ></pb-document>\r\n\r\n  <app-drawer-layout force-narrow=\"force-narrow\" narrow=\"\">\r\n    <app-header-layout>\r\n      <app-header\r\n        fixed=\"fixed\"\r\n        data-template=\"browse:fix-links\"\r\n        style=\"\r\n          transition-duration: 0ms;\r\n          transform: translate3d(0px, 0px, 0px);\r\n          left: 0px;\r\n          right: 0.399994px;\r\n        \"\r\n      >\r\n        <app-toolbar\r\n          class=\"toolbar\"\r\n          sticky=\"sticky\"\r\n          style=\"transform: translate3d(0px, 0px, 0px)\"\r\n        >\r\n          <paper-icon-button\r\n            id=\"tocToggle\"\r\n            class=\"toc-toggle\"\r\n            icon=\"icons:view-list\"\r\n            role=\"button\"\r\n            tabindex=\"0\"\r\n            aria-disabled=\"false\"\r\n          ></paper-icon-button>\r\n\r\n          <pb-toggle-feature\r\n            name=\"highlight2\"\r\n            selector=\"tei-app,pb-popover\"\r\n            default=\"off\"\r\n            action=\"disable\"\r\n            emit=\"transcription\"\r\n            subscribe=\"transcription\"\r\n          >\r\n            <pb-i18n key=\"document.plain\">Plain Reading View</pb-i18n>\r\n          </pb-toggle-feature>\r\n          <!-- <pb-toggle-feature emit=\"sferamundi\" name=\"view\" on=\"page\" off=\"div\">\r\n            <pb-i18n>Visualizzazione Pagina</pb-i18n>\r\n          </pb-toggle-feature> -->\r\n          <pb-zoom\r\n            emit=\"transcription\"\r\n            direction=\"in\"\r\n            icon=\"icons:zoom-in\"\r\n          ></pb-zoom>\r\n          <pb-zoom\r\n            emit=\"transcription\"\r\n            direction=\"out\"\r\n            icon=\"icons:zoom-out\"\r\n          ></pb-zoom>\r\n          <pb-navigation\r\n            emit=\"transcription\"\r\n            keyboard=\"left\"\r\n            subscribe=\"transcription\"\r\n            direction=\"backward\"\r\n            unit=\"page\"\r\n          >\r\n            <paper-icon-button\r\n              icon=\"icons:chevron-left\"\r\n              role=\"button\"\r\n              tabindex=\"0\"\r\n              aria-disabled=\"false\"\r\n            ></paper-icon-button>\r\n          </pb-navigation>\r\n          <pb-navigation\r\n            emit=\"transcription\"\r\n            keyboard=\"right\"\r\n            subscribe=\"transcription\"\r\n            direction=\"forward\"\r\n            unit=\"page\"\r\n          >\r\n            <paper-icon-button\r\n              icon=\"icons:chevron-right\"\r\n              role=\"button\"\r\n              tabindex=\"0\"\r\n              aria-disabled=\"false\"\r\n            ></paper-icon-button>\r\n          </pb-navigation>\r\n\r\n          <pb-progress\r\n            subscribe=\"transcription\"\r\n            indeterminate=\"\"\r\n            bottom-item=\"bottom-item\"\r\n            style=\"visibility: hidden\"\r\n          ></pb-progress>\r\n        </app-toolbar>\r\n      </app-header>\r\n      <pb-drawer\r\n        toggle=\"tocToggle\"\r\n        class=\"tocDrawer\"\r\n        emit=\"toc\"\r\n        subscribe=\"transcription\"\r\n      >\r\n        <div class=\"drawer-content\">\r\n          <h3>\r\n            <pb-i18n key=\"document.contents\">Contents</pb-i18n>\r\n          </h3>\r\n          <pb-load\r\n            *ngIf=\"data.doc\"\r\n            id=\"toc\"\r\n            url=\"templates/toc.html?target=transcription&amp;icons=true\"\r\n            [src]=\"data.doc.id[0]\"\r\n            subscribe=\"toc\"\r\n            load-once=\"load-once\"\r\n            >Loading ...</pb-load\r\n          >\r\n        </div>\r\n      </pb-drawer>\r\n      <main class=\"content-body\">\r\n        <pb-facsimile\r\n          id=\"facsimile\"\r\n          [attr.base-uri]=\"data.facsimile.uri\"\r\n          subscribe=\"transcription\"\r\n          default-zoom-level=\"0\"\r\n          show-navigation-control=\"show-navigation-control\"\r\n          show-navigator=\"show-navigator\"\r\n        ></pb-facsimile>\r\n        <pb-view\r\n          *ngIf=\"data.doc\"\r\n          id=\"view1\"\r\n          [src]=\"data.doc.id[0]\"\r\n          subscribe=\"transcription\"\r\n          emit=\"transcription\"\r\n          wait-for=\"#facsimile\"\r\n          column-separator=\".tei-cb\"\r\n          append-footnotes=\"append-footnotes\"\r\n          view=\"page\"\r\n        ></pb-view>\r\n        <pb-view\r\n          *ngIf=\"data.doc\"\r\n          id=\"view2\"\r\n          [src]=\"data.doc.id[1]\"\r\n          subscribe=\"sferamundi\"\r\n          emit=\"commentary\"\r\n          view=\"single\"\r\n        >\r\n          <pb-param name=\"mode\" value=\"commentary\"></pb-param>\r\n          \r\n        </pb-view>\r\n      </main>\r\n    </app-header-layout>\r\n  </app-drawer-layout>\r\n</pb-page>\r\n</div>\r\n"
    })
], TextViewerComponent);
export { TextViewerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC12aWV3ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbjctZnJvbnRlbmQvY29tcG9uZW50cy8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3RleHQtdmlld2VyL3RleHQtdmlld2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTZCO0FBQzdCLGlCQUFpQjtBQUNqQiw2QkFBNkI7QUFDN0IsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUErQnpELElBQWEsbUJBQW1CLDJCQUFoQyxNQUFhLG1CQUFtQjtJQU85QixRQUFRO1FBQ04sSUFBSSxDQUFDLHFCQUFtQixDQUFDLE9BQU8sRUFBRTtZQUNoQyxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLENBQUMsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLG9EQUFvRCxDQUFDLENBQUM7WUFDNUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDakMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1lBQy9CLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzlCO0lBQ0gsQ0FBQztJQUVELGNBQWM7UUFDWixxQkFBbUIsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0lBQ3JDLENBQUM7SUFFRCxPQUFPLENBQUMsT0FBTztRQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUIsQ0FBQztDQUNGLENBQUE7QUFwQlEsMkJBQU8sR0FBRyxLQUFLLENBQUM7QUFKZDtJQUFSLEtBQUssRUFBRTs7aURBQXNCO0FBRXJCO0lBQVIsS0FBSyxFQUFFOztpREFBVztBQUhSLG1CQUFtQjtJQUovQixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsZ0JBQWdCO1FBQzFCLDJyS0FBaUM7S0FDbEMsQ0FBQztHQUNXLG1CQUFtQixDQXlCL0I7U0F6QlksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gVEVYVC1WSUVXRVIudHNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBUZXh0Vmlld2VyQ29tcG9uZW50J3MgXCJkYXRhXCJcclxuICogQHByb3BlcnR5IGVuZHBvaW50IChyZXF1aXJlZClcclxuICogQHByb3BlcnR5IGRvYyAocmVxdWlyZWQpXHJcbiAqIEBwcm9wZXJ0eSBmYWNzaW1pbGUgKG9wdGlvbmFsKVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBUZXh0Vmlld2VyRGF0YSB7XHJcbiAgLypcclxuICAgICAqIFRFSVB1YiBzZXJ2ZXIgZW5kcG9pbnRcclxuICAqL1xyXG4gIGVuZHBvaW50OiBzdHJpbmc7XHJcbiAgLypcclxuICAgICAqIFhNTCBhbmQgT0REIHBhdGhzXHJcbiAgKi9cclxuICBkb2M6IGFueTtcclxuICAvKlxyXG4gICAgICogSUlJRiBzZXJ2ZXIgZW5kcG9pbnRcclxuICAqL1xyXG4gIGZhY3NpbWlsZT86IGFueTtcclxuICAvKipcclxuICAgKiBhZGRpdGlvbmFsIGh0bWwgY2xhc3Nlc1xyXG4gICAqL1xyXG4gIGNsYXNzZXM/OiBzdHJpbmc7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbjctdGV4dC12aWV3ZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90ZXh0LXZpZXdlci5odG1sJyxcclxufSlcclxuZXhwb3J0IGNsYXNzIFRleHRWaWV3ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBJbnB1dCgpIGRhdGE6IFRleHRWaWV3ZXJEYXRhO1xyXG5cclxuICBASW5wdXQoKSBlbWl0OiBhbnk7XHJcblxyXG4gIHN0YXRpYyBfbG9hZGVkID0gZmFsc2U7XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgaWYgKCFUZXh0Vmlld2VyQ29tcG9uZW50Ll9sb2FkZWQpIHtcclxuICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICBzLnNldEF0dHJpYnV0ZSgnc3JjJywgJy9hc3NldHMvcGItY29tcG9uZW50cy9kaXN0L3BiLWNvbXBvbmVudHMtYnVuZGxlLmpzJyk7XHJcbiAgICAgIHMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ21vZHVsZScpO1xyXG4gICAgICBzLm9ubG9hZCA9IHRoaXMub25TY3JpcHRMb2FkZWQ7XHJcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblNjcmlwdExvYWRlZCgpIHtcclxuICAgIFRleHRWaWV3ZXJDb21wb25lbnQuX2xvYWRlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBvbkNsaWNrKHBheWxvYWQpIHtcclxuICAgIGlmICghdGhpcy5lbWl0KSByZXR1cm47XHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==