//---------------------------
// ANNOTATION.ts
//---------------------------
import { __decorate, __metadata } from "tslib";
import { Component, Input } from '@angular/core';
let AnnotationComponent = class AnnotationComponent {
    onClick(ev, payload) {
        if (!this.emit)
            return;
        ev.stopImmediatePropagation();
        this.emit('click', payload);
    }
    onChange(ev, payload) {
        if (!this.emit)
            return;
        ev.stopPropagation();
        this.emit('change', payload);
    }
    onContainerClick(payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    }
    onEnter(payload) {
        if (!this.emit)
            return;
        this.emit('mouseenter', payload);
    }
    onLeave(payload) {
        if (!this.emit)
            return;
        this.emit('mouseleave', payload);
    }
};
__decorate([
    Input(),
    __metadata("design:type", Object)
], AnnotationComponent.prototype, "data", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], AnnotationComponent.prototype, "emit", void 0);
AnnotationComponent = __decorate([
    Component({
        selector: 'n7-annotation',
        template: "<div *ngIf=\"data\"\r\n     class=\"n7-annotation__container {{ data.classes || ''}}\"\r\n     (click)=\"data.payload && onContainerClick(data.payload)\"\r\n     (mouseenter)=\"data.payload && onEnter(data.payload)\"\r\n     (mouseleave)=\"data.payload && onLeave(data.payload)\">\r\n    <ng-container *ngIf=\"!data.isCollapsed\">\r\n        <!-- view the full annotation -->\r\n        <ng-container *ngTemplateOutlet=\"expanded\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.isCollapsed\">\r\n        <!-- minimal view of the annotation -->\r\n        <ng-container *ngTemplateOutlet=\"collapsed\"></ng-container>\r\n    </ng-container>\r\n</div>\r\n\r\n<ng-template #expanded>\r\n    <!-- metadata row -->\r\n    <div class=\"n7-annotation__metadata-row\">\r\n        <!-- avatar -->\r\n        <div class=\"n7-annotation__image-wrapper\">\r\n            <img [src]=\"data.user.image\"\r\n                 alt=\"User profile picture\"\r\n                 class=\"n7-annotation__image\">\r\n        </div>\r\n        <!-- name -->\r\n        <div class=\"n7-annotation__info-cont\">\r\n            <n7-anchor-wrapper [data]=\"data.user.anchor\">\r\n                <div class=\"n7-annotation__user-name\">{{data.user.name}}</div>\r\n            </n7-anchor-wrapper>\r\n            <!-- time ago - parent notebook -->\r\n            <div class=\"n7-annotation__info\">\r\n                <span class=\"n7-annotation__date\">{{data.date}}</span>\r\n                <span *ngIf=\"data.notebook?.anchor?.href\"> in\r\n                    <!-- rendering error appeared with n7-anchor-wrapper -->\r\n                    <a [href]=\"data.notebook.anchor.href\"\r\n                       [target]=\"data.notebook.anchor.target || '_self'\">\r\n                        <span>{{data.notebook.name}}</span>\r\n                    </a>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"data.menu\"\r\n             class=\"n7-annotation__menu {{ data.menu.classes || '' }}\">\r\n            <!-- arrow icon -->\r\n            <span class=\"n7-annotation__menu-icon\"\r\n                  [ngClass]=\"data.menu.icon['id']\"\r\n                  (click)=\"onClick($event, data.menu.icon['payload'])\">\r\n            </span>\r\n            <div class=\"n7-annotation__menu-dropdown\">\r\n                <!-- menu actions -->\r\n                <div class=\"n7-annotation__menu-actions\" *ngIf=\"data.activeMenu === 'actions'\">\r\n                    <div *ngFor=\"let action of data.menu.actions\"\r\n                            (click)=\"onClick($event, action.payload)\"\r\n                            class=\"n7-annotation__menu-action\">\r\n                        {{ action.label }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"n7-annotation__menu-notebooks\" *ngIf=\"data.activeMenu === 'notebooks'\">\r\n                    <div class=\"n7-annotation__menu-notebooks-header\"\r\n                         (click)=\"onClick($event, data.menu.notebooks.header.payload)\">\r\n                        <!-- notebooks header label -->\r\n                        <span class=\"n7-annotation__notebooks-label\">\r\n                            {{ data.menu.notebooks.header.label }}\r\n                        </span>\r\n                    </div>\r\n                    <div class=\"n7-annotation__select-cont\">\r\n                        <select class=\"n7-annotation__select\"\r\n                                (change)=\"onChange($event, $event.target.value)\"\r\n                                (click)=\"onClick($event, 'notebook-select')\">\r\n                            <option *ngFor=\"let notebook of data.menu.notebooks.items\"\r\n                                    value=\"{{ notebook.payload }}\">\r\n                                {{ notebook.label }}\r\n                            </option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"n7-annotation__divider\">\r\n\r\n    <!-- highlight -->\r\n    <div class=\"n7-annotation__body-row\"\r\n         *ngIf=\"data.body\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n    </div>\r\n\r\n    <!-- comment -->\r\n    <div class=\"n7-annotation__comment-row\"\r\n         *ngIf=\"data.comment\">\r\n        <span class=\"n7-annotation__comment\">\r\n            {{data.comment}}\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #collapsed>\r\n    <div class=\"n7-annotation__collapsed\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n        <span>\r\n            <n7-anchor-wrapper [data]=\"data.notebook.anchor\"\r\n                               class=\"n7-annotation__notebook\">\r\n                {{data.notebook.name}}\r\n            </n7-anchor-wrapper>\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n"
    })
], AnnotationComponent);
export { AnnotationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ub3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuNy1mcm9udGVuZC9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QixnQkFBZ0I7QUFDaEIsNkJBQTZCOztBQUU3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTZFakQsSUFBYSxtQkFBbUIsR0FBaEMsTUFBYSxtQkFBbUI7SUFLOUIsT0FBTyxDQUFDLEVBQVMsRUFBRSxPQUFPO1FBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDdkIsRUFBRSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELFFBQVEsQ0FBQyxFQUFTLEVBQUUsT0FBTztRQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLEVBQUUsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNyQixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRUQsZ0JBQWdCLENBQUMsT0FBTztRQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxPQUFPLENBQUMsT0FBTztRQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVELE9BQU8sQ0FBQyxPQUFPO1FBQ2IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTztRQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNuQyxDQUFDO0NBQ0YsQ0FBQTtBQTlCVTtJQUFSLEtBQUssRUFBRTs7aURBQXNCO0FBRXJCO0lBQVIsS0FBSyxFQUFFOztpREFBVztBQUhSLG1CQUFtQjtJQUovQixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsZUFBZTtRQUN6QixxN0pBQWdDO0tBQ2pDLENBQUM7R0FDVyxtQkFBbUIsQ0ErQi9CO1NBL0JZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbIi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIEFOTk9UQVRJT04udHNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQW5jaG9yLCBJY29uIH0gZnJvbSAnLi4vLi4vc2hhcmVkLWludGVyZmFjZXMnO1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3IgQW5ub3RhdGlvbkNvbXBvbmVudCdzIFwiZGF0YVwiXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB1c2VyIChyZXF1aXJlZClcclxuICogIC0gaW1hZ2UgKG9wdGlvbmFsKVxyXG4gKiAgLSBuYW1lIChyZXF1aXJlZClcclxuICogIC0gYW5jaG9yIChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGRhdGUgKHJlcXVpcmVkKVxyXG4gKiBAcHJvcGVydHkgbm90ZWJvb2sgKHJlcXVpcmVkKVxyXG4gKiAgLSBuYW1lIChyZXF1aXJlZClcclxuICogIC0gYW5jaG9yIChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGljb24gKG9wdGlvbmFsKVxyXG4gKiBAcHJvcGVydHkgYm9keSAocmVxdWlyZWQpXHJcbiAqIEBwcm9wZXJ0eSBjb21tZW50IChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGNsYXNzZXMgKG9wdGlvbmFsKVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBbm5vdGF0aW9uRGF0YSB7XHJcbiAgLyoqIFVzZXIgZGF0YSAqL1xyXG4gIHVzZXI6IHtcclxuICAgIC8qKiBQcm9maWxlIHBpY3R1cmUgKi9cclxuICAgIGltYWdlOiBzdHJpbmc7XHJcbiAgICAvKiogVXNlciBmdWxsIG5hbWUgKi9cclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIC8qKiBOYXZpZ2F0ZSB0byB1c2VyIHBhZ2UgKi9cclxuICAgIGFuY2hvcj86IEFuY2hvcjtcclxuICB9O1xyXG4gIC8qKiBEYXRlIHN0cmluZyAqL1xyXG4gIGRhdGU6IHN0cmluZztcclxuICAvKiogUGFyZW50IG5vdGVib29rIGRhdGEgKi9cclxuICBub3RlYm9vazoge1xyXG4gICAgLyoqIE5vdGVib29rIHRpdGxlICovXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAvKiogTm90ZWJvb2sgbmF2aWdhdGlvbiAqL1xyXG4gICAgYW5jaG9yOiBBbmNob3I7XHJcbiAgfTtcclxuICAvKiogVmlldyB0aGUgYW5ub3RhdGlvbiBpbiBhIG1pbmltYWwgZm9ybSAqL1xyXG4gIGlzQ29sbGFwc2VkOiBib29sZWFuO1xyXG4gIC8qKiBNZW51IGluIHRoZSB0b3AtcmlnaHQgY29ybmVyIG9mIHRoZSBhbm5vdGF0aW9uICovXHJcbiAgbWVudT86IHtcclxuICAgIGljb246IEljb247XHJcbiAgICBhY3Rpb25zOiB7XHJcbiAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgIHBheWxvYWQ6IGFueTtcclxuICAgIH1bXTtcclxuICAgIG5vdGVib29rczoge1xyXG4gICAgICBoZWFkZXI6IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIHBheWxvYWQ6IGFueTtcclxuICAgICAgfTtcclxuICAgICAgaXRlbXM6IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIHBheWxvYWQ6IGFueTtcclxuICAgICAgfVtdO1xyXG4gICAgfTtcclxuICAgIGNsYXNzZXM/OiBzdHJpbmc7XHJcbiAgfTtcclxuICAvKiogVmlzaWJsZSBtZW51ICovXHJcbiAgYWN0aXZlTWVudT86ICdhY3Rpb25zJyB8ICdub3RlYm9va3MnO1xyXG4gIC8qKiBBbm5vdGF0ZWQgdGV4dCAqL1xyXG4gIGJvZHk6IHN0cmluZztcclxuICAvKiogQW5ub3RhdGlvbiBjb21tZW50ICovXHJcbiAgY29tbWVudD86IHN0cmluZztcclxuICAvKiogSFRNTCBDbGFzc2VzICovXHJcbiAgY2xhc3Nlcz86IHN0cmluZztcclxuICAvKiogZWxlbWVudCBjbGljayBwYXlsb2FkICovXHJcbiAgcGF5bG9hZD86IGFueTtcclxuICAvKiogYWRkaXRpb25hbCBkYXRhIHVzZWZ1bCBmb3IgdGhlIGNvbXBvbmVudCdzIGxvZ2ljICovXHJcbiAgX21ldGE/OiBhbnk7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbjctYW5ub3RhdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Fubm90YXRpb24uaHRtbCdcclxufSlcclxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Db21wb25lbnQge1xyXG4gIEBJbnB1dCgpIGRhdGE6IEFubm90YXRpb25EYXRhO1xyXG5cclxuICBASW5wdXQoKSBlbWl0OiBhbnk7XHJcblxyXG4gIG9uQ2xpY2soZXY6IEV2ZW50LCBwYXlsb2FkKSB7XHJcbiAgICBpZiAoIXRoaXMuZW1pdCkgcmV0dXJuO1xyXG4gICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZShldjogRXZlbnQsIHBheWxvYWQpIHtcclxuICAgIGlmICghdGhpcy5lbWl0KSByZXR1cm47XHJcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgcGF5bG9hZCk7XHJcbiAgfVxyXG5cclxuICBvbkNvbnRhaW5lckNsaWNrKHBheWxvYWQpIHtcclxuICAgIGlmICghdGhpcy5lbWl0KSByZXR1cm47XHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XHJcbiAgfVxyXG5cclxuICBvbkVudGVyKHBheWxvYWQpIHtcclxuICAgIGlmICghdGhpcy5lbWl0KSByZXR1cm47XHJcbiAgICB0aGlzLmVtaXQoJ21vdXNlZW50ZXInLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIG9uTGVhdmUocGF5bG9hZCkge1xyXG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcclxuICAgIHRoaXMuZW1pdCgnbW91c2VsZWF2ZScsIHBheWxvYWQpO1xyXG4gIH1cclxufVxyXG4iXX0=