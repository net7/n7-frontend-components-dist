//---------------------------
// ANNOTATION.ts
//---------------------------
import { __decorate, __metadata } from "tslib";
import { Component, Input } from '@angular/core';
let AnnotationComponent = class AnnotationComponent {
    onClick(ev, payload) {
        if (!this.emit)
            return;
        ev.stopImmediatePropagation();
        this.emit('click', payload);
    }
    onContainerClick(target, payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    }
};
__decorate([
    Input(),
    __metadata("design:type", Object)
], AnnotationComponent.prototype, "data", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], AnnotationComponent.prototype, "emit", void 0);
AnnotationComponent = __decorate([
    Component({
        selector: 'n7-annotation',
        template: "<div *ngIf=\"data\"\n     class=\"n7-annotation__container {{ data.classes || ''}}\"\n     (click)=\"data.payload && onContainerClick($event.target, data.payload)\">\n    <ng-container *ngIf=\"!data.isCollapsed\">\n        <!-- view the full annotation -->\n        <ng-container *ngTemplateOutlet=\"expanded\"></ng-container>\n    </ng-container>\n    <ng-container *ngIf=\"data.isCollapsed\">\n        <!-- minimal view of the annotation -->\n        <ng-container *ngTemplateOutlet=\"collapsed\"></ng-container>\n    </ng-container>\n</div>\n\n<ng-template #expanded>\n    <!-- metadata row -->\n    <div class=\"n7-annotation__metadata-row\">\n        <!-- avatar -->\n        <div class=\"n7-annotation__image-wrapper\">\n            <img [src]=\"data.user.image\"\n                 alt=\"User profile picture\"\n                 class=\"n7-annotation__image\">\n        </div>\n        <!-- name -->\n        <div class=\"n7-annotation__info-cont\">\n            <n7-anchor-wrapper [data]=\"data.user.anchor\">\n                <div class=\"n7-annotation__user-name\">{{data.user.name}}</div>\n            </n7-anchor-wrapper>\n            <!-- time ago - parent notebook -->\n            <div class=\"n7-annotation__info\">\n                <span class=\"n7-annotation__date\">{{data.date}}</span>\n                <span *ngIf=\"data.notebook?.anchor?.href\"> in\n                    <!-- rendering error appeared with n7-anchor-wrapper -->\n                    <a [href]=\"data.notebook.anchor.href\"\n                       [target]=\"data.notebook.anchor.target || '_self'\">\n                        <span>{{data.notebook.name}}</span>\n                    </a>\n                </span>\n            </div>\n        </div>\n        <div *ngIf=\"data.menu\" class=\"n7-annotation__menu {{ data.menu.classes || '' }}\">\n            <!-- arrow icon -->\n            <span class=\"n7-annotation__menu-icon\" \n            [ngClass]=\"data.menu.icon['id']\"\n            (click)=\"onClick($event, data.menu.icon['payload'])\">\n            </span>\n            <div class=\"n7-annotation__menu-dropdown\">\n                <!-- menu actions -->\n                <div class=\"n7-annotation__menu-actions\">\n                    <ul>\n                        <li *ngFor=\"let action of data.menu.actions\"\n                        (click)=\"onClick($event, action.payload)\">\n                            {{ action.label }}\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"n7-annotation__menu-notebooks\">\n                    <div class=\"n7-annotation__menu-notebooks-header\"\n                    (click)=\"onClick($event, data.menu.notebooks.header.payload)\">\n                        <!-- notebooks header label -->\n                        <span class=\"n7-annotation__notebooks-label\">\n                            {{ data.menu.notebooks.header.label }}\n                        </span>\n                        <!-- notebooks header icon -->\n                        <span class=\"n7-annotation__notebooks-icon\"\n                        [ngClass]=\"data.menu.notebooks.header.icon['id']\">\n                        </span>\n                    </div>\n                    <div class=\"n7-annotation__menu-notebooks-items\">\n                        <ul>\n                            <li *ngFor=\"let notebook of data.menu.notebooks.items\"\n                            (click)=\"onClick($event, notebook.payload)\">\n                                {{ notebook.label }}\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <hr class=\"n7-annotation__divider\">\n\n    <!-- highlight -->\n    <div class=\"n7-annotation__body-row\"\n         *ngIf=\"data.body\">\n        <span class=\"n7-annotation__body\">\n            {{data.body}}\n        </span>\n    </div>\n\n    <!-- comment -->\n    <div class=\"n7-annotation__comment-row\"\n         *ngIf=\"data.comment\">\n        <span class=\"n7-annotation__comment\">\n            {{data.comment}}\n        </span>\n    </div>\n</ng-template>\n\n<ng-template #collapsed>\n    <div class=\"n7-annotation__collapsed\">\n        <span class=\"n7-annotation__body\">\n            {{data.body}}\n        </span>\n        <span>\n            <n7-anchor-wrapper [data]=\"data.notebook.anchor\"\n                               class=\"n7-annotation__notebook\">\n                {{data.notebook.name}}\n            </n7-anchor-wrapper>\n        </span>\n    </div>\n</ng-template>\n"
    })
], AnnotationComponent);
export { AnnotationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ub3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuNy1mcm9udGVuZC9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QixnQkFBZ0I7QUFDaEIsNkJBQTZCOztBQUU3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTRFakQsSUFBYSxtQkFBbUIsR0FBaEMsTUFBYSxtQkFBbUI7SUFLOUIsT0FBTyxDQUFDLEVBQVMsRUFBRSxPQUFPO1FBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFDdkIsRUFBRSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVELGdCQUFnQixDQUFDLE1BQW1CLEVBQUUsT0FBTztRQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7Q0FDRixDQUFBO0FBZFU7SUFBUixLQUFLLEVBQUU7O2lEQUFzQjtBQUVyQjtJQUFSLEtBQUssRUFBRTs7aURBQVc7QUFIUixtQkFBbUI7SUFKL0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGVBQWU7UUFDekIsMmhKQUFnQztLQUNqQyxDQUFDO0dBQ1csbUJBQW1CLENBZS9CO1NBZlksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFOTk9UQVRJT04udHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFuY2hvciwgSWNvbiB9IGZyb20gJy4uLy4uL3NoYXJlZC1pbnRlcmZhY2VzJztcblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIEFubm90YXRpb25Db21wb25lbnQncyBcImRhdGFcIlxuICpcbiAqIEBwcm9wZXJ0eSB1c2VyIChyZXF1aXJlZClcbiAqICAtIGltYWdlIChvcHRpb25hbClcbiAqICAtIG5hbWUgKHJlcXVpcmVkKVxuICogIC0gYW5jaG9yIChvcHRpb25hbClcbiAqIEBwcm9wZXJ0eSBkYXRlIChyZXF1aXJlZClcbiAqIEBwcm9wZXJ0eSBub3RlYm9vayAocmVxdWlyZWQpXG4gKiAgLSBuYW1lIChyZXF1aXJlZClcbiAqICAtIGFuY2hvciAob3B0aW9uYWwpXG4gKiBAcHJvcGVydHkgaWNvbiAob3B0aW9uYWwpXG4gKiBAcHJvcGVydHkgYm9keSAocmVxdWlyZWQpXG4gKiBAcHJvcGVydHkgY29tbWVudCAob3B0aW9uYWwpXG4gKiBAcHJvcGVydHkgY2xhc3NlcyAob3B0aW9uYWwpXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQW5ub3RhdGlvbkRhdGEge1xuICAvKiogVXNlciBkYXRhICovXG4gIHVzZXI6IHtcbiAgICAvKiogUHJvZmlsZSBwaWN0dXJlICovXG4gICAgaW1hZ2U6IHN0cmluZztcbiAgICAvKiogVXNlciBmdWxsIG5hbWUgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgLyoqIE5hdmlnYXRlIHRvIHVzZXIgcGFnZSAqL1xuICAgIGFuY2hvcj86IEFuY2hvcjtcbiAgfTtcbiAgLyoqIERhdGUgc3RyaW5nICovXG4gIGRhdGU6IHN0cmluZztcbiAgLyoqIFBhcmVudCBub3RlYm9vayBkYXRhICovXG4gIG5vdGVib29rOiB7XG4gICAgLyoqIE5vdGVib29rIHRpdGxlICovXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIC8qKiBOb3RlYm9vayBuYXZpZ2F0aW9uICovXG4gICAgYW5jaG9yOiBBbmNob3I7XG4gIH07XG4gIC8qKiBWaWV3IHRoZSBhbm5vdGF0aW9uIGluIGEgbWluaW1hbCBmb3JtICovXG4gIGlzQ29sbGFwc2VkOiBib29sZWFuO1xuICAvKiogTWVudSBpbiB0aGUgdG9wLXJpZ2h0IGNvcm5lciBvZiB0aGUgYW5ub3RhdGlvbiAqL1xuICBtZW51Pzoge1xuICAgIGljb246IEljb247XG4gICAgYWN0aW9uczoge1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIHBheWxvYWQ6IGFueTtcbiAgICB9W107XG4gICAgbm90ZWJvb2tzOiB7XG4gICAgICBoZWFkZXI6IHtcbiAgICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgICAgaWNvbjogSWNvbjtcbiAgICAgICAgcGF5bG9hZDogYW55O1xuICAgICAgfTtcbiAgICAgIGl0ZW1zOiB7XG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICAgIHBheWxvYWQ6IGFueTtcbiAgICAgIH1bXTtcbiAgICB9O1xuICAgIGNsYXNzZXM/OiBzdHJpbmc7XG4gIH07XG4gIC8qKiBBbm5vdGF0ZWQgdGV4dCAqL1xuICBib2R5OiBzdHJpbmc7XG4gIC8qKiBBbm5vdGF0aW9uIGNvbW1lbnQgKi9cbiAgY29tbWVudD86IHN0cmluZztcbiAgLyoqIEhUTUwgQ2xhc3NlcyAqL1xuICBjbGFzc2VzPzogc3RyaW5nO1xuICAvKiogZWxlbWVudCBjbGljayBwYXlsb2FkICovXG4gIHBheWxvYWQ/OiBhbnk7XG4gIC8qKiBhZGRpdGlvbmFsIGRhdGEgdXNlZnVsIGZvciB0aGUgY29tcG9uZW50J3MgbG9naWMgKi9cbiAgX21ldGE/OiBhbnk7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ243LWFubm90YXRpb24nLFxuICB0ZW1wbGF0ZVVybDogJy4vYW5ub3RhdGlvbi5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBBbm5vdGF0aW9uQ29tcG9uZW50IHtcbiAgQElucHV0KCkgZGF0YTogQW5ub3RhdGlvbkRhdGE7XG5cbiAgQElucHV0KCkgZW1pdDogYW55O1xuXG4gIG9uQ2xpY2soZXY6IEV2ZW50LCBwYXlsb2FkKSB7XG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcbiAgICBldi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XG4gIH1cblxuICBvbkNvbnRhaW5lckNsaWNrKHRhcmdldDogSFRNTEVsZW1lbnQsIHBheWxvYWQpIHtcbiAgICBpZiAoIXRoaXMuZW1pdCkgcmV0dXJuO1xuICAgIHRoaXMuZW1pdCgnY2xpY2snLCBwYXlsb2FkKTtcbiAgfVxufVxuIl19