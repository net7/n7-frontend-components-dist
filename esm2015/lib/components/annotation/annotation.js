//---------------------------
// ANNOTATION.ts
//---------------------------
import { __decorate, __metadata } from "tslib";
import { Component, Input } from '@angular/core';
let AnnotationComponent = class AnnotationComponent {
    onClick(payload) {
        if (!this.emit)
            return;
        this.emit('click', payload);
    }
    onContainerClick(target, payload) {
        if (!this.emit || this.isIconClass(target.className))
            return;
        this.emit('click', payload);
    }
    /** Test if a string is a n7-icon class */
    isIconClass(classString) {
        return /n7-icon.*/.test(classString);
    }
};
__decorate([
    Input(),
    __metadata("design:type", Object)
], AnnotationComponent.prototype, "data", void 0);
__decorate([
    Input(),
    __metadata("design:type", Object)
], AnnotationComponent.prototype, "emit", void 0);
AnnotationComponent = __decorate([
    Component({
        selector: 'n7-annotation',
        template: "<div *ngIf=\"data\"\r\n     class=\"n7-annotation__container {{ data.classes || ''}}\"\r\n     (click)=\"data.payload && onContainerClick($event.target, data.payload)\">\r\n    <ng-container *ngIf=\"!data.isCollapsed\">\r\n        <!-- view the full annotation -->\r\n        <ng-container *ngTemplateOutlet=\"expanded\"></ng-container>\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.isCollapsed\">\r\n        <!-- minimal view of the annotation -->\r\n        <ng-container *ngTemplateOutlet=\"collapsed\"></ng-container>\r\n    </ng-container>\r\n</div>\r\n\r\n<ng-template #expanded>\r\n    <!-- metadata row -->\r\n    <div class=\"n7-annotation__metadata-row\">\r\n        <!-- avatar -->\r\n        <div class=\"n7-annotation__image-wrapper\">\r\n            <img [src]=\"data.user.image\"\r\n                 alt=\"User profile picture\"\r\n                 class=\"n7-annotation__image\">\r\n        </div>\r\n        <!-- name -->\r\n        <div class=\"n7-annotation__info-cont\">\r\n            <n7-anchor-wrapper [data]=\"data.user.anchor\">\r\n                <div class=\"n7-annotation__user-name\">{{data.user.name}}</div>\r\n            </n7-anchor-wrapper>\r\n            <!-- time ago - parent notebook -->\r\n            <div class=\"n7-annotation__info\">\r\n                <span class=\"n7-annotation__date\">{{data.date}}</span>\r\n                <span *ngIf=\"data.notebook?.anchor?.href\"> in\r\n                    <!-- rendering error appeared with n7-anchor-wrapper -->\r\n                    <a [href]=\"data.notebook.anchor.href\"\r\n                       [target]=\"data.notebook.anchor.target || '_self'\">\r\n                        <span>{{data.notebook.name}}</span>\r\n                    </a>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class=\"n7-annotation__info\">\r\n            <!-- arrow icon -->\r\n            <span *ngIf=\"data.icon\"\r\n                  [ngClass]=\"data.icon['id']\"\r\n                  (click)=\"data.icon['payload'] && onClick(data.icon['payload'])\">\r\n            </span>\r\n        </div>\r\n    </div>\r\n\r\n    <hr class=\"n7-annotation__divider\">\r\n\r\n    <!-- highlight -->\r\n    <div class=\"n7-annotation__body-row\"\r\n         *ngIf=\"data.body\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n    </div>\r\n\r\n    <!-- comment -->\r\n    <div class=\"n7-annotation__comment-row\"\r\n         *ngIf=\"data.comment\">\r\n        <span class=\"n7-annotation__comment\">\r\n            {{data.comment}}\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #collapsed>\r\n    <div class=\"n7-annotation__collapsed\">\r\n        <span class=\"n7-annotation__body\">\r\n            {{data.body}}\r\n        </span>\r\n        <span>\r\n            <n7-anchor-wrapper [data]=\"data.notebook.anchor\"\r\n                               class=\"n7-annotation__notebook\">\r\n                {{data.notebook.name}}\r\n            </n7-anchor-wrapper>\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n"
    })
], AnnotationComponent);
export { AnnotationComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ub3RhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuNy1mcm9udGVuZC9jb21wb25lbnRzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvYW5ub3RhdGlvbi9hbm5vdGF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZCQUE2QjtBQUM3QixnQkFBZ0I7QUFDaEIsNkJBQTZCOztBQUU3QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQTBEakQsSUFBYSxtQkFBbUIsR0FBaEMsTUFBYSxtQkFBbUI7SUFLOUIsT0FBTyxDQUFDLE9BQU87UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPO1FBRXZCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxNQUFtQixFQUFFLE9BQU87UUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO1lBQUUsT0FBTztRQUU3RCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUM5QixDQUFDO0lBRUQsMENBQTBDO0lBQzFDLFdBQVcsQ0FBQyxXQUFtQjtRQUM3QixPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDdkMsQ0FBQztDQUNGLENBQUE7QUFwQlU7SUFBUixLQUFLLEVBQUU7O2lEQUFzQjtBQUVyQjtJQUFSLEtBQUssRUFBRTs7aURBQVc7QUFIUixtQkFBbUI7SUFKL0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGVBQWU7UUFDekIsMmlHQUFnQztLQUNqQyxDQUFDO0dBQ1csbUJBQW1CLENBcUIvQjtTQXJCWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBBTk5PVEFUSU9OLnRzXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFuY2hvciwgSWNvbiB9IGZyb20gJy4uLy4uL3NoYXJlZC1pbnRlcmZhY2VzJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIEFubm90YXRpb25Db21wb25lbnQncyBcImRhdGFcIlxyXG4gKlxyXG4gKiBAcHJvcGVydHkgdXNlciAocmVxdWlyZWQpXHJcbiAqICAtIGltYWdlIChvcHRpb25hbClcclxuICogIC0gbmFtZSAocmVxdWlyZWQpXHJcbiAqICAtIGFuY2hvciAob3B0aW9uYWwpXHJcbiAqIEBwcm9wZXJ0eSBkYXRlIChyZXF1aXJlZClcclxuICogQHByb3BlcnR5IG5vdGVib29rIChyZXF1aXJlZClcclxuICogIC0gbmFtZSAocmVxdWlyZWQpXHJcbiAqICAtIGFuY2hvciAob3B0aW9uYWwpXHJcbiAqIEBwcm9wZXJ0eSBpY29uIChvcHRpb25hbClcclxuICogQHByb3BlcnR5IGJvZHkgKHJlcXVpcmVkKVxyXG4gKiBAcHJvcGVydHkgY29tbWVudCAob3B0aW9uYWwpXHJcbiAqIEBwcm9wZXJ0eSBjbGFzc2VzIChvcHRpb25hbClcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQW5ub3RhdGlvbkRhdGEge1xyXG4gIC8qKiBVc2VyIGRhdGEgKi9cclxuICB1c2VyOiB7XHJcbiAgICAvKiogUHJvZmlsZSBwaWN0dXJlICovXHJcbiAgICBpbWFnZTogc3RyaW5nO1xyXG4gICAgLyoqIFVzZXIgZnVsbCBuYW1lICovXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAvKiogTmF2aWdhdGUgdG8gdXNlciBwYWdlICovXHJcbiAgICBhbmNob3I/OiBBbmNob3I7XHJcbiAgfTtcclxuICAvKiogRGF0ZSBzdHJpbmcgKi9cclxuICBkYXRlOiBzdHJpbmc7XHJcbiAgLyoqIFBhcmVudCBub3RlYm9vayBkYXRhICovXHJcbiAgbm90ZWJvb2s6IHtcclxuICAgIC8qKiBOb3RlYm9vayB0aXRsZSAqL1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgLyoqIE5vdGVib29rIG5hdmlnYXRpb24gKi9cclxuICAgIGFuY2hvcjogQW5jaG9yO1xyXG4gIH07XHJcbiAgLyoqIFZpZXcgdGhlIGFubm90YXRpb24gaW4gYSBtaW5pbWFsIGZvcm0gKi9cclxuICBpc0NvbGxhcHNlZDogYm9vbGVhbjtcclxuICAvKiogSWNvbiBpbiB0aGUgdG9wLXJpZ2h0IGNvcm5lciBvZiB0aGUgYW5ub3RhdGlvbiAqL1xyXG4gIGljb24/OiBJY29uO1xyXG4gIC8qKiBBbm5vdGF0ZWQgdGV4dCAqL1xyXG4gIGJvZHk6IHN0cmluZztcclxuICAvKiogQW5ub3RhdGlvbiBjb21tZW50ICovXHJcbiAgY29tbWVudD86IHN0cmluZztcclxuICAvKiogSFRNTCBDbGFzc2VzICovXHJcbiAgY2xhc3Nlcz86IHN0cmluZztcclxuICAvKiogZWxlbWVudCBjbGljayBwYXlsb2FkICovXHJcbiAgcGF5bG9hZD86IGFueTtcclxuICAvKiogYWRkaXRpb25hbCBkYXRhIHVzZWZ1bCBmb3IgdGhlIGNvbXBvbmVudCdzIGxvZ2ljICovXHJcbiAgX21ldGE/OiBhbnk7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbjctYW5ub3RhdGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL2Fubm90YXRpb24uaHRtbCdcclxufSlcclxuZXhwb3J0IGNsYXNzIEFubm90YXRpb25Db21wb25lbnQge1xyXG4gIEBJbnB1dCgpIGRhdGE6IEFubm90YXRpb25EYXRhO1xyXG5cclxuICBASW5wdXQoKSBlbWl0OiBhbnk7XHJcblxyXG4gIG9uQ2xpY2socGF5bG9hZCkge1xyXG4gICAgaWYgKCF0aGlzLmVtaXQpIHJldHVybjtcclxuXHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XHJcbiAgfVxyXG5cclxuICBvbkNvbnRhaW5lckNsaWNrKHRhcmdldDogSFRNTEVsZW1lbnQsIHBheWxvYWQpIHtcclxuICAgIGlmICghdGhpcy5lbWl0IHx8IHRoaXMuaXNJY29uQ2xhc3ModGFyZ2V0LmNsYXNzTmFtZSkpIHJldHVybjtcclxuXHJcbiAgICB0aGlzLmVtaXQoJ2NsaWNrJywgcGF5bG9hZCk7XHJcbiAgfVxyXG5cclxuICAvKiogVGVzdCBpZiBhIHN0cmluZyBpcyBhIG43LWljb24gY2xhc3MgKi9cclxuICBpc0ljb25DbGFzcyhjbGFzc1N0cmluZzogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gL243LWljb24uKi8udGVzdChjbGFzc1N0cmluZyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==